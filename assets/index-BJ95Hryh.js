(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const w of document.querySelectorAll('link[rel="modulepreload"]'))l(w);new MutationObserver(w=>{for(const z of w)if(z.type==="childList")for(const L of z.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&l(L)}).observe(document,{childList:!0,subtree:!0});function A(w){const z={};return w.integrity&&(z.integrity=w.integrity),w.referrerPolicy&&(z.referrerPolicy=w.referrerPolicy),w.crossOrigin==="use-credentials"?z.credentials="include":w.crossOrigin==="anonymous"?z.credentials="omit":z.credentials="same-origin",z}function l(w){if(w.ep)return;w.ep=!0;const z=A(w);fetch(w.href,z)}})();class Oe{constructor(i){this.gl=i,this.numCircles=1e6,this.initShaders()}setData(i){this.numCircles=i.length,this.processData(i),this.initBuffers()}processData(i){this.offsets=new Float32Array(this.numCircles*2),this.sizes=new Float32Array(this.numCircles),this.colors=new Float32Array(this.numCircles*4),this.titles=[],this.ids=[],i.forEach((A,l)=>{this.ids[l]=parseInt(A.id),this.titles[l]=A.title,this.offsets[l*2]=parseFloat(A.x),this.offsets[l*2+1]=parseFloat(A.y),this.sizes[l]=parseFloat(A.size),this.colors[l*4]=parseFloat(A.r),this.colors[l*4+1]=parseFloat(A.g),this.colors[l*4+2]=parseFloat(A.b),this.colors[l*4+3]=1})}initShaders(){const i=`
        attribute vec2 a_position;    
        attribute vec2 a_offset;     
        attribute float a_size;
        attribute vec4 a_color;       
  
        uniform mat4 u_projection;   
  
        varying vec2 v_point;    
        varying vec4 v_color;     
  
        void main() {
          vec2 scaledPosition = a_position * a_size + a_offset;
          gl_Position = u_projection * vec4(scaledPosition, 0.0, 1.0);
          v_point = a_position;
          v_color = a_color;
        }
      `,A=`
        precision mediump float;
  
        varying vec2 v_point;         
        varying vec4 v_color; 
  
        void main() {
          float dist = length(v_point); 
          if (dist > 1.0) discard;     
          gl_FragColor = v_color;
        }
      `;this.program=this.createProgram(this.createShader(this.gl.VERTEX_SHADER,i),this.createShader(this.gl.FRAGMENT_SHADER,A)),this.locations={position:this.gl.getAttribLocation(this.program,"a_position"),offset:this.gl.getAttribLocation(this.program,"a_offset"),size:this.gl.getAttribLocation(this.program,"a_size"),color:this.gl.getAttribLocation(this.program,"a_color"),projection:this.gl.getUniformLocation(this.program,"u_projection")}}initBuffers(){const i=new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]);this.quadBuffer=this.createBuffer(i),this.offsetBuffer=this.createBuffer(this.offsets),this.sizeBuffer=this.createBuffer(this.sizes),this.colorBuffer=this.createBuffer(this.colors)}createShader(i,A){const l=this.gl.createShader(i);return this.gl.shaderSource(l,A),this.gl.compileShader(l),this.gl.getShaderParameter(l,this.gl.COMPILE_STATUS)?l:(console.error(this.gl.getShaderInfoLog(l)),this.gl.deleteShader(l),null)}createProgram(i,A){const l=this.gl.createProgram();return this.gl.attachShader(l,i),this.gl.attachShader(l,A),this.gl.linkProgram(l),this.gl.getProgramParameter(l,this.gl.LINK_STATUS)?l:(console.error(this.gl.getProgramInfoLog(l)),this.gl.deleteProgram(l),null)}createBuffer(i){const A=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,A),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,this.gl.STATIC_DRAW),A}draw(i){this.gl.useProgram(this.program),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.quadBuffer),this.gl.vertexAttribPointer(this.locations.position,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.locations.position),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.offsetBuffer),this.gl.vertexAttribPointer(this.locations.offset,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.locations.offset),this.gl.vertexAttribDivisor(this.locations.offset,1),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sizeBuffer),this.gl.vertexAttribPointer(this.locations.size,1,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.locations.size),this.gl.vertexAttribDivisor(this.locations.size,1),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorBuffer),this.gl.vertexAttribPointer(this.locations.color,4,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.locations.color),this.gl.vertexAttribDivisor(this.locations.color,1),this.gl.uniformMatrix4fv(this.locations.projection,!1,i),this.gl.drawArraysInstanced(this.gl.TRIANGLES,0,6,this.numCircles)}}class ze{constructor(i){this.gl=i,this.fontSize=2,this.opacity=1,this.isReady=!1,this.fontInfo=null,this.positions=[],this.charSizes=[],this.texturePositions=[],this.initShaders(),this.initBuffers(),this.loadFont()}async loadFont(){return new Promise((i,A)=>{(async()=>{try{const w=await(await fetch("/fonts/Roboto.json",{mode:"cors"})).json();this.fontInfo=w,this.alphabet=new Map,w.chars.forEach(L=>{this.alphabet.set(String.fromCharCode(L.id),L)});const z=new Image;z.crossOrigin="Anonymous",z.onload=()=>{const L=this.gl;this.texture=L.createTexture(),L.pixelStorei(L.UNPACK_FLIP_Y_WEBGL,!0),L.bindTexture(L.TEXTURE_2D,this.texture),L.texImage2D(L.TEXTURE_2D,0,L.RGBA,L.RGBA,L.UNSIGNED_BYTE,z),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MIN_FILTER,L.LINEAR),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MAG_FILTER,L.LINEAR),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,L.CLAMP_TO_EDGE),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,L.CLAMP_TO_EDGE),L.bindTexture(L.TEXTURE_2D,null),this.sdfTextureWidth=z.width,this.sdfTextureHeight=z.height,this.isReady=!0,i()},z.src="/fonts/Roboto0.png"}catch(l){A(l),console.error("Failed to load font:",l)}})()})}createShader(i,A,l){const w=i.createShader(A);return i.shaderSource(w,l),i.compileShader(w),i.getShaderParameter(w,i.COMPILE_STATUS)?w:(console.error("Shader compilation error:",i.getShaderInfoLog(w)),i.deleteShader(w),null)}createProgram(i,A,l){const w=i.createProgram();return i.attachShader(w,A),i.attachShader(w,l),i.linkProgram(w),i.getProgramParameter(w,i.LINK_STATUS)?w:(console.error("Program linking error:",i.getProgramInfoLog(w)),null)}initShaders(){const i=this.gl,A=`#version 300 es
      precision highp float;
      
      uniform mat4 modelViewProjection;
      uniform vec4 color;
      uniform float cameraDistance;
  
      in vec3 position;
      in vec2 point;
      in vec3 charSize;
      in vec4 texturePosition;
  
      out vec2 vPoint;
      out vec4 vColor;
  
      void main() {
        vec3 pos = position + vec3(vec2(point) * charSize.xy, 0.0);
        gl_Position = modelViewProjection * vec4(pos, 1.0);
        vPoint = texturePosition.xy + point * texturePosition.zw;
        vColor = color;
        //vColor[3] *= (1. - smoothstep(0.0, 1., cameraDistance / (5000. * charSize.z)));
      }`,l=`#version 300 es
      precision highp float;
      
      uniform sampler2D msdf;
      uniform float bias;
      uniform float opacity;
  
      in vec2 vPoint;
      in vec4 vColor;
  
      out vec4 fragColor;
  
      float median(float r, float g, float b) {
        return max(min(r, g), min(max(r, g), b));
      }
  
      void main() {
        vec3 tsample = texture(msdf, vPoint).rgb;
        float sigDist = median(tsample.r, tsample.g, tsample.b) - bias;
        float alpha = clamp(sigDist / fwidth(sigDist) + bias, 0.0, 1.0);
        fragColor = vec4(vColor.rgb, vColor.a * alpha * opacity);
      }`,w=this.createShader(i,i.VERTEX_SHADER,A),z=this.createShader(i,i.FRAGMENT_SHADER,l);this.program=this.createProgram(i,w,z),this.locations={position:i.getAttribLocation(this.program,"position"),point:i.getAttribLocation(this.program,"point"),charSize:i.getAttribLocation(this.program,"charSize"),texturePosition:i.getAttribLocation(this.program,"texturePosition"),modelViewProjection:i.getUniformLocation(this.program,"modelViewProjection"),color:i.getUniformLocation(this.program,"color"),cameraDistance:i.getUniformLocation(this.program,"cameraDistance"),bias:i.getUniformLocation(this.program,"bias"),opacity:i.getUniformLocation(this.program,"opacity"),msdf:i.getUniformLocation(this.program,"msdf")}}initBuffers(){const i=this.gl;this.vao=i.createVertexArray(),i.bindVertexArray(this.vao),this.buffers={position:i.createBuffer(),point:i.createBuffer(),charSize:i.createBuffer(),texturePosition:i.createBuffer()};const A=new Float32Array([0,0,1,0,1,1,1,1,0,0,0,1]);i.bindBuffer(i.ARRAY_BUFFER,this.buffers.point),i.bufferData(i.ARRAY_BUFFER,A,i.STATIC_DRAW),i.enableVertexAttribArray(this.locations.point),i.vertexAttribPointer(this.locations.point,2,i.FLOAT,!1,0,0),i.vertexAttribDivisor(this.locations.point,0),i.bindVertexArray(null)}addText(i){if(!this.isReady)return;let{text:A,x:l=0,y:w=0,z=0}=i;if(!A)return;let L=0,ee=i.fontSize;if(i.limit!==void 0){let x=0;for(let Y of A){let $=this.alphabet.get(Y);$||($=this.alphabet.get("_")),x+=$.xadvance}ee=i.limit*this.fontInfo.info.size/x}const ue=ee/this.fontInfo.info.size;if(i.cx!==void 0){let x=0;for(const Y of A){let $=this.alphabet.get(Y);$||($=this.alphabet.get("_")),x+=$.xadvance}L-=x*i.cx*ue}i.cy!==void 0&&(w+=ee*i.cy);for(const x of A){let Y=this.alphabet.get(x);Y||(Y=this.alphabet.get("_")),this.positions.push(l+L,w-Y.yoffset*ue,z),this.charSizes.push(ee*Y.width/42,-ee*Y.height/42,ee),this.texturePositions.push(Y.x/this.sdfTextureWidth,1-Y.y/this.sdfTextureHeight,Y.width/this.sdfTextureWidth,-Y.height/this.sdfTextureHeight),L+=Y.xadvance*ue}}uploadBuffers(){const i=this.gl;i.bindVertexArray(this.vao),i.bindBuffer(i.ARRAY_BUFFER,this.buffers.position),i.bufferData(i.ARRAY_BUFFER,new Float32Array(this.positions),i.STATIC_DRAW),i.enableVertexAttribArray(this.locations.position),i.vertexAttribPointer(this.locations.position,3,i.FLOAT,!1,0,0),i.vertexAttribDivisor(this.locations.position,1),i.bindBuffer(i.ARRAY_BUFFER,this.buffers.charSize),i.bufferData(i.ARRAY_BUFFER,new Float32Array(this.charSizes),i.STATIC_DRAW),i.enableVertexAttribArray(this.locations.charSize),i.vertexAttribPointer(this.locations.charSize,3,i.FLOAT,!1,0,0),i.vertexAttribDivisor(this.locations.charSize,1),i.bindBuffer(i.ARRAY_BUFFER,this.buffers.texturePosition),i.bufferData(i.ARRAY_BUFFER,new Float32Array(this.texturePositions),i.STATIC_DRAW),i.enableVertexAttribArray(this.locations.texturePosition),i.vertexAttribPointer(this.locations.texturePosition,4,i.FLOAT,!1,0,0),i.vertexAttribDivisor(this.locations.texturePosition,1),i.bindVertexArray(null)}draw(i,A){const l=this.gl;if(!this.isReady||this.positions.length===0)return;l.useProgram(this.program),l.bindVertexArray(this.vao),l.uniformMatrix4fv(this.locations.modelViewProjection,!1,i),l.uniform1f(this.locations.cameraDistance,A),l.uniform1f(this.locations.opacity,this.opacity),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,this.texture),l.uniform1i(this.locations.msdf,0);const w=this.positions.length/3;l.uniform4f(this.locations.color,1,1,1,1),l.uniform1f(this.locations.bias,.5),l.drawArraysInstanced(l.TRIANGLES,0,6,w),l.bindVertexArray(null)}clear(){this.positions=[],this.charSizes=[],this.texturePositions=[]}}function Ie(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var xe={exports:{}};/* @license
Papa Parse
v5.5.1
https://github.com/mholt/PapaParse
License: MIT
*/var Ue=xe.exports,Fe;function Me(){return Fe||(Fe=1,function(C,i){((A,l)=>{C.exports=l()})(Ue,function A(){var l=typeof self<"u"?self:typeof window<"u"?window:l!==void 0?l:{},w,z=!l.document&&!!l.postMessage,L=l.IS_PAPA_WORKER||!1,ee={},ue=0,x={};function Y(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var a=_e(t);a.chunkSize=parseInt(a.chunkSize),t.step||t.chunk||(a.chunkSize=null),this._handle=new me(a),(this._handle.streamer=this)._config=a}).call(this,e),this.parseChunk=function(t,a){var d=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<d){let F=this._config.newline;F||(g=this._config.quoteChar||'"',F=this._handle.guessLineEndings(t,g)),t=[...t.split(F).slice(d)].join(F)}this.isFirstChunk&&j(this._config.beforeFirstChunk)&&(g=this._config.beforeFirstChunk(t))!==void 0&&(t=g),this.isFirstChunk=!1,this._halted=!1;var d=this._partialLine+t,g=(this._partialLine="",this._handle.parse(d,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=g.meta.cursor,d=(this._finished||(this._partialLine=d.substring(t-this._baseIndex),this._baseIndex=t),g&&g.data&&(this._rowCount+=g.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),L)l.postMessage({results:g,workerId:x.WORKER_ID,finished:d});else if(j(this._config.chunk)&&!a){if(this._config.chunk(g,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=g=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(g.data),this._completeResults.errors=this._completeResults.errors.concat(g.errors),this._completeResults.meta=g.meta),this._completed||!d||!j(this._config.complete)||g&&g.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),d||g&&g.meta.paused||this._nextChunk(),g}this._halted=!0},this._sendError=function(t){j(this._config.error)?this._config.error(t):L&&this._config.error&&l.postMessage({workerId:x.WORKER_ID,error:t,finished:!1})}}function $(e){var t;(e=e||{}).chunkSize||(e.chunkSize=x.RemoteChunkSize),Y.call(this,e),this._nextChunk=z?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(a){this._input=a,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),z||(t.onload=se(this._chunkLoaded,this),t.onerror=se(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!z),this._config.downloadRequestHeaders){var a,d=this._config.downloadRequestHeaders;for(a in d)t.setRequestHeader(a,d[a])}var g;this._config.chunkSize&&(g=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+g));try{t.send(this._config.downloadRequestBody)}catch(F){this._chunkError(F.message)}z&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(a=>(a=a.getResponseHeader("Content-Range"))!==null?parseInt(a.substring(a.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(a){a=t.statusText||a,this._sendError(new Error(a))}}function ce(e){(e=e||{}).chunkSize||(e.chunkSize=x.LocalChunkSize),Y.call(this,e);var t,a,d=typeof FileReader<"u";this.stream=function(g){this._input=g,a=g.slice||g.webkitSlice||g.mozSlice,d?((t=new FileReader).onload=se(this._chunkLoaded,this),t.onerror=se(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var g=this._input,F=(this._config.chunkSize&&(F=Math.min(this._start+this._config.chunkSize,this._input.size),g=a.call(g,this._start,F)),t.readAsText(g,this._config.encoding));d||this._chunkLoaded({target:{result:F}})},this._chunkLoaded=function(g){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(g.target.result)},this._chunkError=function(){this._sendError(t.error)}}function ie(e){var t;Y.call(this,e=e||{}),this.stream=function(a){return t=a,this._nextChunk()},this._nextChunk=function(){var a,d;if(!this._finished)return a=this._config.chunkSize,t=a?(d=t.substring(0,a),t.substring(a)):(d=t,""),this._finished=!t,this.parseChunk(d)}}function de(e){Y.call(this,e=e||{});var t=[],a=!0,d=!1;this.pause=function(){Y.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){Y.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(g){this._input=g,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){d&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):a=!0},this._streamData=se(function(g){try{t.push(typeof g=="string"?g:g.toString(this._config.encoding)),a&&(a=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(F){this._streamError(F)}},this),this._streamError=se(function(g){this._streamCleanUp(),this._sendError(g)},this),this._streamEnd=se(function(){this._streamCleanUp(),d=!0,this._streamData("")},this),this._streamCleanUp=se(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function me(e){var t,a,d,g,F=Math.pow(2,53),H=-F,Q=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,U=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,M=this,v=0,G=0,y=!1,te=!1,B=[],b={data:[],errors:[],meta:{}};function n(f){return e.skipEmptyLines==="greedy"?f.join("").trim()==="":f.length===1&&f[0].length===0}function r(){if(b&&d&&(p("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+x.DefaultDelimiter+"'"),d=!1),e.skipEmptyLines&&(b.data=b.data.filter(function(u){return!n(u)})),o()){let u=function(E,m){j(e.transformHeader)&&(E=e.transformHeader(E,m)),B.push(E)};var c=u;if(b)if(Array.isArray(b.data[0])){for(var f=0;o()&&f<b.data.length;f++)b.data[f].forEach(u);b.data.splice(0,1)}else b.data.forEach(u)}function h(u,E){for(var m=e.header?{}:[],T=0;T<u.length;T++){var P=T,_=u[T],_=((W,S)=>(k=>(e.dynamicTypingFunction&&e.dynamicTyping[k]===void 0&&(e.dynamicTyping[k]=e.dynamicTypingFunction(k)),(e.dynamicTyping[k]||e.dynamicTyping)===!0))(W)?S==="true"||S==="TRUE"||S!=="false"&&S!=="FALSE"&&((k=>{if(Q.test(k)&&(k=parseFloat(k),H<k&&k<F))return 1})(S)?parseFloat(S):U.test(S)?new Date(S):S===""?null:S):S)(P=e.header?T>=B.length?"__parsed_extra":B[T]:P,_=e.transform?e.transform(_,P):_);P==="__parsed_extra"?(m[P]=m[P]||[],m[P].push(_)):m[P]=_}return e.header&&(T>B.length?p("FieldMismatch","TooManyFields","Too many fields: expected "+B.length+" fields but parsed "+T,G+E):T<B.length&&p("FieldMismatch","TooFewFields","Too few fields: expected "+B.length+" fields but parsed "+T,G+E)),m}var s;b&&(e.header||e.dynamicTyping||e.transform)&&(s=1,!b.data.length||Array.isArray(b.data[0])?(b.data=b.data.map(h),s=b.data.length):b.data=h(b.data,0),e.header&&b.meta&&(b.meta.fields=B),G+=s)}function o(){return e.header&&B.length===0}function p(f,h,s,c){f={type:f,code:h,message:s},c!==void 0&&(f.row=c),b.errors.push(f)}j(e.step)&&(g=e.step,e.step=function(f){b=f,o()?r():(r(),b.data.length!==0&&(v+=f.data.length,e.preview&&v>e.preview?a.abort():(b.data=b.data[0],g(b,M))))}),this.parse=function(f,h,s){var c=e.quoteChar||'"',c=(e.newline||(e.newline=this.guessLineEndings(f,c)),d=!1,e.delimiter?j(e.delimiter)&&(e.delimiter=e.delimiter(f),b.meta.delimiter=e.delimiter):((c=((u,E,m,T,P)=>{var _,W,S,k;P=P||[",","	","|",";",x.RECORD_SEP,x.UNIT_SEP];for(var J=0;J<P.length;J++){for(var K,N=P[J],I=0,D=0,R=0,X=(S=void 0,new pe({comments:T,delimiter:N,newline:E,preview:10}).parse(u)),V=0;V<X.data.length;V++)m&&n(X.data[V])?R++:(K=X.data[V].length,D+=K,S===void 0?S=K:0<K&&(I+=Math.abs(K-S),S=K));0<X.data.length&&(D/=X.data.length-R),(W===void 0||I<=W)&&(k===void 0||k<D)&&1.99<D&&(W=I,_=N,k=D)}return{successful:!!(e.delimiter=_),bestDelimiter:_}})(f,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=c.bestDelimiter:(d=!0,e.delimiter=x.DefaultDelimiter),b.meta.delimiter=e.delimiter),_e(e));return e.preview&&e.header&&c.preview++,t=f,a=new pe(c),b=a.parse(t,h,s),r(),y?{meta:{paused:!0}}:b||{meta:{paused:!1}}},this.paused=function(){return y},this.pause=function(){y=!0,a.abort(),t=j(e.chunk)?"":t.substring(a.getCharIndex())},this.resume=function(){M.streamer._halted?(y=!1,M.streamer.parseChunk(t,!0)):setTimeout(M.resume,3)},this.aborted=function(){return te},this.abort=function(){te=!0,a.abort(),b.meta.aborted=!0,j(e.complete)&&e.complete(b),t=""},this.guessLineEndings=function(u,c){u=u.substring(0,1048576);var c=new RegExp(ne(c)+"([^]*?)"+ne(c),"gm"),s=(u=u.replace(c,"")).split("\r"),c=u.split(`
`),u=1<c.length&&c[0].length<s[0].length;if(s.length===1||u)return`
`;for(var E=0,m=0;m<s.length;m++)s[m][0]===`
`&&E++;return E>=s.length/2?`\r
`:"\r"}}function ne(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function pe(e){var t=(e=e||{}).delimiter,a=e.newline,d=e.comments,g=e.step,F=e.preview,H=e.fastMode,Q=null,U=e.quoteChar==null?'"':e.quoteChar,M=U;if(e.escapeChar!==void 0&&(M=e.escapeChar),(typeof t!="string"||-1<x.BAD_DELIMITERS.indexOf(t))&&(t=","),d===t)throw new Error("Comment character same as delimiter");d===!0?d="#":(typeof d!="string"||-1<x.BAD_DELIMITERS.indexOf(d))&&(d=!1),a!==`
`&&a!=="\r"&&a!==`\r
`&&(a=`
`);var v=0,G=!1;this.parse=function(y,te,B){if(typeof y!="string")throw new Error("Input must be a string");var b=y.length,n=t.length,r=a.length,o=d.length,p=j(g),f=[],h=[],s=[],c=v=0;if(!y)return N();if(H||H!==!1&&y.indexOf(U)===-1){for(var u=y.split(a),E=0;E<u.length;E++){if(s=u[E],v+=s.length,E!==u.length-1)v+=a.length;else if(B)return N();if(!d||s.substring(0,o)!==d){if(p){if(f=[],S(s.split(t)),I(),G)return N()}else S(s.split(t));if(F&&F<=E)return f=f.slice(0,F),N(!0)}}return N()}for(var m=y.indexOf(t,v),T=y.indexOf(a,v),P=new RegExp(ne(M)+ne(U),"g"),_=y.indexOf(U,v);;)if(y[v]===U)for(_=v,v++;;){if((_=y.indexOf(U,_+1))===-1)return B||h.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:f.length,index:v}),J();if(_===b-1)return J(y.substring(v,_).replace(P,U));if(U===M&&y[_+1]===M)_++;else if(U===M||_===0||y[_-1]!==M){m!==-1&&m<_+1&&(m=y.indexOf(t,_+1));var W=k((T=T!==-1&&T<_+1?y.indexOf(a,_+1):T)===-1?m:Math.min(m,T));if(y.substr(_+1+W,n)===t){s.push(y.substring(v,_).replace(P,U)),y[v=_+1+W+n]!==U&&(_=y.indexOf(U,v)),m=y.indexOf(t,v),T=y.indexOf(a,v);break}if(W=k(T),y.substring(_+1+W,_+1+W+r)===a){if(s.push(y.substring(v,_).replace(P,U)),K(_+1+W+r),m=y.indexOf(t,v),_=y.indexOf(U,v),p&&(I(),G))return N();if(F&&f.length>=F)return N(!0);break}h.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:f.length,index:v}),_++}}else if(d&&s.length===0&&y.substring(v,v+o)===d){if(T===-1)return N();v=T+r,T=y.indexOf(a,v),m=y.indexOf(t,v)}else if(m!==-1&&(m<T||T===-1))s.push(y.substring(v,m)),v=m+n,m=y.indexOf(t,v);else{if(T===-1)break;if(s.push(y.substring(v,T)),K(T+r),p&&(I(),G))return N();if(F&&f.length>=F)return N(!0)}return J();function S(D){f.push(D),c=v}function k(D){var R=0;return R=D!==-1&&(D=y.substring(_+1,D))&&D.trim()===""?D.length:R}function J(D){return B||(D===void 0&&(D=y.substring(v)),s.push(D),v=b,S(s),p&&I()),N()}function K(D){v=D,S(s),s=[],T=y.indexOf(a,v)}function N(D){if(e.header&&!te&&f.length){var R=f[0],X={},V=new Set(R);let oe=!1;for(let re=0;re<R.length;re++){let Z=R[re];if(X[Z=j(e.transformHeader)?e.transformHeader(Z,re):Z]){let O,q=X[Z];for(;O=Z+"_"+q,q++,V.has(O););V.add(O),R[re]=O,X[Z]++,oe=!0,(Q=Q===null?{}:Q)[O]=Z}else X[Z]=1,R[re]=Z;V.add(Z)}oe&&console.warn("Duplicate headers found and renamed.")}return{data:f,errors:h,meta:{delimiter:t,linebreak:a,aborted:G,truncated:!!D,cursor:c+(te||0),renamedHeaders:Q}}}function I(){g(N()),f=[],h=[]}},this.abort=function(){G=!0},this.getCharIndex=function(){return v}}function ye(e){var t=e.data,a=ee[t.workerId],d=!1;if(t.error)a.userError(t.error,t.file);else if(t.results&&t.results.data){var g={abort:function(){d=!0,ge(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:be,resume:be};if(j(a.userStep)){for(var F=0;F<t.results.data.length&&(a.userStep({data:t.results.data[F],errors:t.results.errors,meta:t.results.meta},g),!d);F++);delete t.results}else j(a.userChunk)&&(a.userChunk(t.results,g,t.file),delete t.results)}t.finished&&!d&&ge(t.workerId,t.results)}function ge(e,t){var a=ee[e];j(a.userComplete)&&a.userComplete(t),a.terminate(),delete ee[e]}function be(){throw new Error("Not implemented.")}function _e(e){if(typeof e!="object"||e===null)return e;var t,a=Array.isArray(e)?[]:{};for(t in e)a[t]=_e(e[t]);return a}function se(e,t){return function(){e.apply(t,arguments)}}function j(e){return typeof e=="function"}return x.parse=function(e,t){var a=(t=t||{}).dynamicTyping||!1;if(j(a)&&(t.dynamicTypingFunction=a,a={}),t.dynamicTyping=a,t.transform=!!j(t.transform)&&t.transform,!t.worker||!x.WORKERS_SUPPORTED)return a=null,x.NODE_STREAM_INPUT,typeof e=="string"?(e=(d=>d.charCodeAt(0)!==65279?d:d.slice(1))(e),a=new(t.download?$:ie)(t)):e.readable===!0&&j(e.read)&&j(e.on)?a=new de(t):(l.File&&e instanceof File||e instanceof Object)&&(a=new ce(t)),a.stream(e);(a=(()=>{var d;return!!x.WORKERS_SUPPORTED&&(d=(()=>{var g=l.URL||l.webkitURL||null,F=A.toString();return x.BLOB_URL||(x.BLOB_URL=g.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",F,")();"],{type:"text/javascript"})))})(),(d=new l.Worker(d)).onmessage=ye,d.id=ue++,ee[d.id]=d)})()).userStep=t.step,a.userChunk=t.chunk,a.userComplete=t.complete,a.userError=t.error,t.step=j(t.step),t.chunk=j(t.chunk),t.complete=j(t.complete),t.error=j(t.error),delete t.worker,a.postMessage({input:e,config:t,workerId:a.id})},x.unparse=function(e,t){var a=!1,d=!0,g=",",F=`\r
`,H='"',Q=H+H,U=!1,M=null,v=!1,G=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||x.BAD_DELIMITERS.filter(function(B){return t.delimiter.indexOf(B)!==-1}).length||(g=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(a=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(U=t.skipEmptyLines),typeof t.newline=="string"&&(F=t.newline),typeof t.quoteChar=="string"&&(H=t.quoteChar),typeof t.header=="boolean"&&(d=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");M=t.columns}t.escapeChar!==void 0&&(Q=t.escapeChar+H),t.escapeFormulae instanceof RegExp?v=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(v=/^[=+\-@\t\r].*$/)}})(),new RegExp(ne(H),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return y(null,e,U);if(typeof e[0]=="object")return y(M||Object.keys(e[0]),e,U)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||M),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),y(e.fields||[],e.data||[],U);throw new Error("Unable to serialize unrecognized input");function y(B,b,n){var r="",o=(typeof B=="string"&&(B=JSON.parse(B)),typeof b=="string"&&(b=JSON.parse(b)),Array.isArray(B)&&0<B.length),p=!Array.isArray(b[0]);if(o&&d){for(var f=0;f<B.length;f++)0<f&&(r+=g),r+=te(B[f],f);0<b.length&&(r+=F)}for(var h=0;h<b.length;h++){var s=(o?B:b[h]).length,c=!1,u=o?Object.keys(b[h]).length===0:b[h].length===0;if(n&&!o&&(c=n==="greedy"?b[h].join("").trim()==="":b[h].length===1&&b[h][0].length===0),n==="greedy"&&o){for(var E=[],m=0;m<s;m++){var T=p?B[m]:m;E.push(b[h][T])}c=E.join("").trim()===""}if(!c){for(var P=0;P<s;P++){0<P&&!u&&(r+=g);var _=o&&p?B[P]:P;r+=te(b[h][_],P)}h<b.length-1&&(!n||0<s&&!u)&&(r+=F)}}return r}function te(B,b){var n,r;return B==null?"":B.constructor===Date?JSON.stringify(B).slice(1,25):(r=!1,v&&typeof B=="string"&&v.test(B)&&(B="'"+B,r=!0),n=B.toString().replace(G,Q),(r=r||a===!0||typeof a=="function"&&a(B,b)||Array.isArray(a)&&a[b]||((o,p)=>{for(var f=0;f<p.length;f++)if(-1<o.indexOf(p[f]))return!0;return!1})(n,x.BAD_DELIMITERS)||-1<n.indexOf(g)||n.charAt(0)===" "||n.charAt(n.length-1)===" ")?H+n+H:n)}},x.RECORD_SEP="",x.UNIT_SEP="",x.BYTE_ORDER_MARK="\uFEFF",x.BAD_DELIMITERS=["\r",`
`,'"',x.BYTE_ORDER_MARK],x.WORKERS_SUPPORTED=!z&&!!l.Worker,x.NODE_STREAM_INPUT=1,x.LocalChunkSize=10485760,x.RemoteChunkSize=5242880,x.DefaultDelimiter=",",x.Parser=pe,x.ParserHandle=me,x.NetworkStreamer=$,x.FileStreamer=ce,x.StringStreamer=ie,x.ReadableStreamStreamer=de,l.jQuery&&((w=l.jQuery).fn.parse=function(e){var t=e.config||{},a=[];return this.each(function(F){if(!(w(this).prop("tagName").toUpperCase()==="INPUT"&&w(this).attr("type").toLowerCase()==="file"&&l.FileReader)||!this.files||this.files.length===0)return!0;for(var H=0;H<this.files.length;H++)a.push({file:this.files[H],inputElem:this,instanceConfig:w.extend({},t)})}),d(),this;function d(){if(a.length===0)j(e.complete)&&e.complete();else{var F,H,Q,U,M=a[0];if(j(e.before)){var v=e.before(M.file,M.inputElem);if(typeof v=="object"){if(v.action==="abort")return F="AbortError",H=M.file,Q=M.inputElem,U=v.reason,void(j(e.error)&&e.error({name:F},H,Q,U));if(v.action==="skip")return void g();typeof v.config=="object"&&(M.instanceConfig=w.extend(M.instanceConfig,v.config))}else if(v==="skip")return void g()}var G=M.instanceConfig.complete;M.instanceConfig.complete=function(y){j(G)&&G(y,M.file,M.inputElem),g()},x.parse(M.file,M.instanceConfig)}}function g(){a.splice(0,1),d()}}),L&&(l.onmessage=function(e){e=e.data,x.WORKER_ID===void 0&&e&&(x.WORKER_ID=e.workerId),typeof e.input=="string"?l.postMessage({workerId:x.WORKER_ID,results:x.parse(e.input,e.config),finished:!0}):(l.File&&e.input instanceof File||e.input instanceof Object)&&(e=x.parse(e.input,e.config))&&l.postMessage({workerId:x.WORKER_ID,results:e,finished:!0})}),($.prototype=Object.create(Y.prototype)).constructor=$,(ce.prototype=Object.create(Y.prototype)).constructor=ce,(ie.prototype=Object.create(ie.prototype)).constructor=ie,(de.prototype=Object.create(Y.prototype)).constructor=de,x})}(xe)),xe.exports}var Ne=Me();const je=Ie(Ne);var Ae={exports:{}},qe=Ae.exports,Pe;function We(){return Pe||(Pe=1,function(C){((i,A)=>{C.exports?C.exports=A():i.fuzzysort=A()})(qe,i=>{var A=(n,r)=>{if(!n||!r)return y;var o=de(n);U(r)||(r=ie(r));var p=o.bitflags;return(p&r._bitflags)!==p?y:ne(o,r)},l=(n,r,o)=>{if(!n)return o!=null&&o.all?me(r,o):G;var p=de(n),f=p.bitflags,h=p.containsSpace,s=$((o==null?void 0:o.threshold)||0),c=(o==null?void 0:o.limit)||M,u=0,E=0,m=r.length;function T(re){u<c?(b.add(re),++u):(++E,re._score>b.peek()._score&&b.replaceTop(re))}if(o!=null&&o.key)for(var P=o.key,_=0;_<m;++_){var W=r[_],S=Q(W,P);if(S&&(U(S)||(S=ie(S)),(f&S._bitflags)===f)){var k=ne(p,S);k!==y&&(k._score<s||(k.obj=W,T(k)))}}else if(o!=null&&o.keys){var J=o.keys,K=J.length;e:for(var _=0;_<m;++_){var W=r[_];{for(var N=0,I=0;I<K;++I){var P=J[I],S=Q(W,P);if(!S){F[I]=te;continue}U(S)||(S=ie(S)),F[I]=S,N|=S._bitflags}if((f&N)!==f)continue}if(h)for(let O=0;O<p.spaceSearches.length;O++)d[O]=v;for(var I=0;I<K;++I){if(S=F[I],S===te){H[I]=te;continue}if(H[I]=ne(p,S,!1,h),H[I]===y){H[I]=te;continue}if(h)for(let q=0;q<p.spaceSearches.length;q++){if(g[q]>-1e3&&d[q]>v){var D=(d[q]+g[q])/4;D>d[q]&&(d[q]=D)}g[q]>d[q]&&(d[q]=g[q])}}if(h){for(let O=0;O<p.spaceSearches.length;O++)if(d[O]===v)continue e}else{var R=!1;for(let O=0;O<K;O++)if(H[O]._score!==v){R=!0;break}if(!R)continue}var X=new ue(K);for(let O=0;O<K;O++)X[O]=H[O];if(h){var V=0;for(let O=0;O<p.spaceSearches.length;O++)V+=d[O]}else{var V=v;for(let q=0;q<K;q++){var k=X[q];if(k._score>-1e3&&V>v){var D=(V+k._score)/4;D>V&&(V=D)}k._score>V&&(V=k._score)}}if(X.obj=W,X._score=V,o!=null&&o.scoreFn){if(V=o.scoreFn(X),!V)continue;V=$(V),X._score=V}V<s||T(X)}}else for(var _=0;_<m;++_){var S=r[_];if(S&&(U(S)||(S=ie(S)),(f&S._bitflags)===f)){var k=ne(p,S);k!==y&&(k._score<s||T(k))}}if(u===0)return G;for(var oe=new Array(u),_=u-1;_>=0;--_)oe[_]=b.poll();return oe.total=u+E,oe},w=(n,r="<b>",o="</b>")=>{for(var p=typeof r=="function"?r:void 0,f=n.target,h=f.length,s=n.indexes,c="",u=0,E=0,m=!1,T=[],P=0;P<h;++P){var _=f[P];if(s[E]===P){if(++E,m||(m=!0,p?(T.push(c),c=""):c+=r),E===s.length){p?(c+=_,T.push(p(c,u++)),c="",T.push(f.substr(P+1))):c+=_+o+f.substr(P+1);break}}else m&&(m=!1,p?(T.push(p(c,u++)),c=""):c+=o);c+=_}return p?T:c},z=n=>{typeof n=="number"?n=""+n:typeof n!="string"&&(n="");var r=ge(n);return x(n,{_targetLower:r._lower,_targetLowerCodes:r.lowerCodes,_bitflags:r.bitflags})},L=()=>{se.clear(),j.clear()};class ee{get indexes(){return this._indexes.slice(0,this._indexes.len).sort((r,o)=>r-o)}set indexes(r){return this._indexes=r}highlight(r,o){return w(this,r,o)}get score(){return Y(this._score)}set score(r){this._score=$(r)}}class ue extends Array{get score(){return Y(this._score)}set score(r){this._score=$(r)}}var x=(n,r)=>{const o=new ee;return o.target=n,o.obj=r.obj??y,o._score=r._score??v,o._indexes=r._indexes??[],o._targetLower=r._targetLower??"",o._targetLowerCodes=r._targetLowerCodes??y,o._nextBeginningIndexes=r._nextBeginningIndexes??y,o._bitflags=r._bitflags??0,o},Y=n=>n===v?0:n>1?n:Math.E**(((-n+1)**.04307-1)*-2),$=n=>n===0?v:n>1?n:1-Math.pow(Math.log(n)/-2+1,1/.04307),ce=n=>{typeof n=="number"?n=""+n:typeof n!="string"&&(n=""),n=n.trim();var r=ge(n),o=[];if(r.containsSpace){var p=n.split(/\s+/);p=[...new Set(p)];for(var f=0;f<p.length;f++)if(p[f]!==""){var h=ge(p[f]);o.push({lowerCodes:h.lowerCodes,_lower:p[f].toLowerCase(),containsSpace:!1})}}return{lowerCodes:r.lowerCodes,_lower:r._lower,containsSpace:r.containsSpace,bitflags:r.bitflags,spaceSearches:o}},ie=n=>{if(n.length>999)return z(n);var r=se.get(n);return r!==void 0||(r=z(n),se.set(n,r)),r},de=n=>{if(n.length>999)return ce(n);var r=j.get(n);return r!==void 0||(r=ce(n),j.set(n,r)),r},me=(n,r)=>{var o=[];o.total=n.length;var p=(r==null?void 0:r.limit)||M;if(r!=null&&r.key)for(var f=0;f<n.length;f++){var h=n[f],s=Q(h,r.key);if(s!=y){U(s)||(s=ie(s));var c=x(s.target,{_score:s._score,obj:h});if(o.push(c),o.length>=p)return o}}else if(r!=null&&r.keys)for(var f=0;f<n.length;f++){for(var h=n[f],u=new ue(r.keys.length),E=r.keys.length-1;E>=0;--E){var s=Q(h,r.keys[E]);if(!s){u[E]=te;continue}U(s)||(s=ie(s)),s._score=v,s._indexes.len=0,u[E]=s}if(u.obj=h,u._score=v,o.push(u),o.length>=p)return o}else for(var f=0;f<n.length;f++){var s=n[f];if(s!=y&&(U(s)||(s=ie(s)),s._score=v,s._indexes.len=0,o.push(s),o.length>=p))return o}return o},ne=(n,r,o=!1,p=!1)=>{if(o===!1&&n.containsSpace)return pe(n,r,p);for(var f=n._lower,h=n.lowerCodes,s=h[0],c=r._targetLowerCodes,u=h.length,E=c.length,_=0,m=0,T=0;;){var P=s===c[m];if(P){if(e[T++]=m,++_,_===u)break;s=h[_]}if(++m,m>=E)return y}var _=0,W=!1,S=0,k=r._nextBeginningIndexes;k===y&&(k=r._nextBeginningIndexes=_e(r.target)),m=e[0]===0?0:k[e[0]-1];var J=0;if(m!==E)for(;;)if(m>=E){if(_<=0||(++J,J>200))break;--_;var K=t[--S];m=k[K]}else{var P=h[_]===c[m];if(P){if(t[S++]=m,++_,_===u){W=!0;break}++m}else m=k[m]}var N=u<=1?-1:r._targetLower.indexOf(f,e[0]),I=!!~N,D=I?N===0||r._nextBeginningIndexes[N-1]===N:!1;if(I&&!D){for(var R=0;R<k.length;R=k[R])if(!(R<=N)){for(var X=0;X<u&&h[X]===r._targetLowerCodes[R+X];X++);if(X===u){N=R,D=!0;break}}}var V=O=>{for(var q=0,Ce=0,le=1;le<u;++le)O[le]-O[le-1]!==1&&(q-=O[le],++Ce);var Be=O[u-1]-O[0]-(u-1);if(q-=(12+Be)*Ce,O[0]!==0&&(q-=O[0]*O[0]*.2),!W)q*=1e3;else{for(var Se=1,le=k[0];le<E;le=k[le])++Se;Se>24&&(q*=(Se-24)*10)}return q-=(E-u)/2,I&&(q/=1+u*u*1),D&&(q/=1+u*u*1),q-=(E-u)/2,q};if(W)if(D){for(var R=0;R<u;++R)e[R]=N+R;var oe=e,re=V(e)}else var oe=t,re=V(t);else{if(I)for(var R=0;R<u;++R)e[R]=N+R;var oe=e,re=V(oe)}r._score=re;for(var R=0;R<u;++R)r._indexes[R]=oe[R];r._indexes.len=u;const Z=new ee;return Z.target=r.target,Z._score=r._score,Z._indexes=r._indexes,Z},pe=(n,r,o)=>{for(var p=new Set,f=0,h=y,s=0,c=n.spaceSearches,u=c.length,E=0,m=()=>{for(let D=E-1;D>=0;D--)r._nextBeginningIndexes[a[D*2+0]]=a[D*2+1]},T=!1,I=0;I<u;++I){g[I]=v;var P=c[I];if(h=ne(P,r),o){if(h===y)continue;T=!0}else if(h===y)return m(),y;var _=I===u-1;if(!_){var W=h._indexes,S=!0;for(let R=0;R<W.len-1;R++)if(W[R+1]-W[R]!==1){S=!1;break}if(S){var k=W[W.len-1]+1,J=r._nextBeginningIndexes[k-1];for(let R=k-1;R>=0&&J===r._nextBeginningIndexes[R];R--)r._nextBeginningIndexes[R]=k,a[E*2+0]=R,a[E*2+1]=J,E++}}f+=h._score/u,g[I]=h._score/u,h._indexes[0]<s&&(f-=(s-h._indexes[0])*2),s=h._indexes[0];for(var K=0;K<h._indexes.len;++K)p.add(h._indexes[K])}if(o&&!T)return y;m();var N=ne(n,r,!0);if(N!==y&&N._score>f){if(o)for(var I=0;I<u;++I)g[I]=N._score/u;return N}o&&(h=r),h._score=f;var I=0;for(let D of p)h._indexes[I++]=D;return h._indexes.len=I,h},ye=n=>n.replace(new RegExp("\\p{Script=Latin}+","gu"),r=>r.normalize("NFD")).replace(/[\u0300-\u036f]/g,""),ge=n=>{n=ye(n);for(var r=n.length,o=n.toLowerCase(),p=[],f=0,h=!1,s=0;s<r;++s){var c=p[s]=o.charCodeAt(s);if(c===32){h=!0;continue}var u=c>=97&&c<=122?c-97:c>=48&&c<=57?26:c<=127?30:31;f|=1<<u}return{lowerCodes:p,bitflags:f,containsSpace:h,_lower:o}},be=n=>{for(var r=n.length,o=[],p=0,f=!1,h=!1,s=0;s<r;++s){var c=n.charCodeAt(s),u=c>=65&&c<=90,E=u||c>=97&&c<=122||c>=48&&c<=57,m=u&&!f||!h||!E;f=u,h=E,m&&(o[p++]=s)}return o},_e=n=>{n=ye(n);for(var r=n.length,o=be(n),p=[],f=o[0],h=0,s=0;s<r;++s)f>s?p[s]=f:(f=o[++h],p[s]=f===void 0?r:f);return p},se=new Map,j=new Map,e=[],t=[],a=[],d=[],g=[],F=[],H=[],Q=(n,r)=>{var o=n[r];if(o!==void 0)return o;if(typeof r=="function")return r(n);var p=r;Array.isArray(r)||(p=r.split("."));for(var f=p.length,h=-1;n&&++h<f;)n=n[p[h]];return n},U=n=>typeof n=="object"&&typeof n._bitflags=="number",M=1/0,v=-M,G=[];G.total=0;var y=null,te=z(""),B=n=>{var r=[],o=0,p={},f=h=>{for(var s=0,c=r[s],u=1;u<o;){var E=u+1;s=u,E<o&&r[E]._score<r[u]._score&&(s=E),r[s-1>>1]=r[s],u=1+(s<<1)}for(var m=s-1>>1;s>0&&c._score<r[m]._score;m=(s=m)-1>>1)r[s]=r[m];r[s]=c};return p.add=h=>{var s=o;r[o++]=h;for(var c=s-1>>1;s>0&&h._score<r[c]._score;c=(s=c)-1>>1)r[s]=r[c];r[s]=h},p.poll=h=>{if(o!==0){var s=r[0];return r[0]=r[--o],f(),s}},p.peek=h=>{if(o!==0)return r[0]},p.replaceTop=h=>{r[0]=h,f()},p},b=B();return{single:A,go:l,prepare:z,cleanup:L}})}(Ae)),Ae.exports}var Ve=We();const Ye=Ie(Ve),he=document.getElementById("webgl-canvas");he.width=window.innerWidth;he.height=window.innerHeight;const fe=he.getContext("webgl2");if(!fe)throw alert("WebGL 2.0 is not supported in your browser."),new Error("WebGL 2.0 not supported.");fe.clearColor(0,0,0,1);fe.enable(fe.BLEND);fe.blendFunc(fe.SRC_ALPHA,fe.ONE_MINUS_SRC_ALPHA);let ve=20,Te=0,Le=0,ke=!1,we=0,Re=0;he.addEventListener("mousedown",C=>{ke=!0,we=C.clientX,Re=C.clientY});he.addEventListener("mouseup",()=>{ke=!1});he.addEventListener("mousemove",C=>{if(ke){const i=(C.clientX-we)*(ve/1e3),A=(C.clientY-Re)*(ve/1e3);Te-=i,Le+=A,we=C.clientX,Re=C.clientY}});he.addEventListener("wheel",C=>{const i=Math.exp(C.deltaY*.001);ve*=i});function He(){const C=he.width/he.height,i=1/ve;return new Float32Array([i/C,0,0,0,0,i,0,0,0,0,1,0,-Te*i/C,-Le*i,0,1])}function Xe(){const C=document.getElementById("search").value,i=document.getElementById("search-results");if(C===""){i.innerHTML="",i.style.display="none";return}const A=Ye.go(C,ae.titles,{limit:5});A.length>0?(i.innerHTML=A.map(l=>`<div class="search-result-item" data-title="${l.target}">${l.target}</div>`).join(""),i.style.display="block",document.querySelectorAll(".search-result-item").forEach(l=>{l.addEventListener("click",w=>Ke(w))})):(i.innerHTML="<div>No results found</div>",i.style.display="block")}function Ke(C){const A=C.target.dataset.title;Ge(A)}document.getElementById("search").addEventListener("input",Xe);function Ge(C){const i=ae.titles.indexOf(C);Te=ae.offsets[i*2],Le=ae.offsets[i*2+1],ve=ae.sizes[i]*10}const ae=new Oe(fe),Ee=new ze(fe);function $e(C){return new Promise((i,A)=>{je.parse(C,{download:!0,header:!0,dynamicTyping:!1,skipEmptyLines:!0,complete:l=>i(l.data),error:l=>A(l)})})}async function Qe(){try{const C=await $e("/layout3.csv");ae.setData(C),await Ee.loadFont();for(let i=0;i<ae.numCircles;i++)Ee.addText({text:ae.titles[i],x:ae.offsets[i*2],y:ae.offsets[i*2+1],limit:2*ae.sizes[i],cx:.51,cy:.5});Ee.uploadBuffers()}catch(C){console.error("Error initializing the application:",C)}}function De(){fe.clear(fe.COLOR_BUFFER_BIT);const C=He();ae.draw(C),Ee.draw(C,1),requestAnimationFrame(De)}Qe().then(De);
