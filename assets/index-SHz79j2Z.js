(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))s(A);new MutationObserver(A=>{for(const D of A)if(D.type==="childList")for(const E of D.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&s(E)}).observe(document,{childList:!0,subtree:!0});function d(A){const D={};return A.integrity&&(D.integrity=A.integrity),A.referrerPolicy&&(D.referrerPolicy=A.referrerPolicy),A.crossOrigin==="use-credentials"?D.credentials="include":A.crossOrigin==="anonymous"?D.credentials="omit":D.credentials="same-origin",D}function s(A){if(A.ep)return;A.ep=!0;const D=d(A);fetch(A.href,D)}})();class De{constructor(r){this.gl=r,this.numCircles=1e6,this.initShaders()}setData(r){this.numCircles=r.length,this.processData(r),this.initBuffers()}processData(r){this.offsets=new Float32Array(this.numCircles*2),this.sizes=new Float32Array(this.numCircles),this.colors=new Float32Array(this.numCircles*4),this.titles=[],this.ids=[],r.forEach((d,s)=>{this.ids[s]=parseInt(d.id),this.titles[s]=d.title,this.offsets[s*2]=parseFloat(d.x),this.offsets[s*2+1]=parseFloat(d.y),this.sizes[s]=parseFloat(d.size),this.colors[s*4]=parseFloat(d.r),this.colors[s*4+1]=parseFloat(d.g),this.colors[s*4+2]=parseFloat(d.b),this.colors[s*4+3]=1})}initShaders(){const r=`
        attribute vec2 a_position;    
        attribute vec2 a_offset;     
        attribute float a_size;
        attribute vec4 a_color;       
  
        uniform mat4 u_projection;   
  
        varying vec2 v_point;    
        varying vec4 v_color;     
  
        void main() {
          vec2 scaledPosition = a_position * a_size + a_offset;
          gl_Position = u_projection * vec4(scaledPosition, 0.0, 1.0);
          v_point = a_position;
          v_color = a_color;
        }
      `,d=`
        precision mediump float;
  
        varying vec2 v_point;         
        varying vec4 v_color; 
  
        void main() {
          float dist = length(v_point); 
          if (dist > 1.0) discard;     
          gl_FragColor = v_color;
        }
      `;this.program=this.createProgram(this.createShader(this.gl.VERTEX_SHADER,r),this.createShader(this.gl.FRAGMENT_SHADER,d)),this.locations={position:this.gl.getAttribLocation(this.program,"a_position"),offset:this.gl.getAttribLocation(this.program,"a_offset"),size:this.gl.getAttribLocation(this.program,"a_size"),color:this.gl.getAttribLocation(this.program,"a_color"),projection:this.gl.getUniformLocation(this.program,"u_projection")}}initBuffers(){const r=new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]);this.quadBuffer=this.createBuffer(r),this.offsetBuffer=this.createBuffer(this.offsets),this.sizeBuffer=this.createBuffer(this.sizes),this.colorBuffer=this.createBuffer(this.colors)}createShader(r,d){const s=this.gl.createShader(r);return this.gl.shaderSource(s,d),this.gl.compileShader(s),this.gl.getShaderParameter(s,this.gl.COMPILE_STATUS)?s:(console.error(this.gl.getShaderInfoLog(s)),this.gl.deleteShader(s),null)}createProgram(r,d){const s=this.gl.createProgram();return this.gl.attachShader(s,r),this.gl.attachShader(s,d),this.gl.linkProgram(s),this.gl.getProgramParameter(s,this.gl.LINK_STATUS)?s:(console.error(this.gl.getProgramInfoLog(s)),this.gl.deleteProgram(s),null)}createBuffer(r){const d=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,d),this.gl.bufferData(this.gl.ARRAY_BUFFER,r,this.gl.STATIC_DRAW),d}draw(r){this.gl.useProgram(this.program),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.quadBuffer),this.gl.vertexAttribPointer(this.locations.position,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.locations.position),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.offsetBuffer),this.gl.vertexAttribPointer(this.locations.offset,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.locations.offset),this.gl.vertexAttribDivisor(this.locations.offset,1),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sizeBuffer),this.gl.vertexAttribPointer(this.locations.size,1,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.locations.size),this.gl.vertexAttribDivisor(this.locations.size,1),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorBuffer),this.gl.vertexAttribPointer(this.locations.color,4,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.locations.color),this.gl.vertexAttribDivisor(this.locations.color,1),this.gl.uniformMatrix4fv(this.locations.projection,!1,r),this.gl.drawArraysInstanced(this.gl.TRIANGLES,0,6,this.numCircles)}}class Be{constructor(r){this.gl=r,this.fontSize=2,this.opacity=1,this.isReady=!1,this.fontInfo=null,this.positions=[],this.charSizes=[],this.texturePositions=[],this.initShaders(),this.initBuffers(),this.loadFont()}async loadFont(){return new Promise((r,d)=>{(async()=>{try{const A=await(await fetch("/Map-of-Wiki/fonts/Roboto.json",{mode:"cors"})).json();this.fontInfo=A,this.alphabet=new Map,A.chars.forEach(E=>{this.alphabet.set(String.fromCharCode(E.id),E)});const D=new Image;D.crossOrigin="Anonymous",D.onload=()=>{const E=this.gl;this.texture=E.createTexture(),E.pixelStorei(E.UNPACK_FLIP_Y_WEBGL,!0),E.bindTexture(E.TEXTURE_2D,this.texture),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,D),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.bindTexture(E.TEXTURE_2D,null),this.sdfTextureWidth=D.width,this.sdfTextureHeight=D.height,this.isReady=!0,r()},D.src="/Map-of-Wiki/fonts/Roboto0.png"}catch(s){d(s),console.error("Failed to load font:",s)}})()})}createShader(r,d,s){const A=r.createShader(d);return r.shaderSource(A,s),r.compileShader(A),r.getShaderParameter(A,r.COMPILE_STATUS)?A:(console.error("Shader compilation error:",r.getShaderInfoLog(A)),r.deleteShader(A),null)}createProgram(r,d,s){const A=r.createProgram();return r.attachShader(A,d),r.attachShader(A,s),r.linkProgram(A),r.getProgramParameter(A,r.LINK_STATUS)?A:(console.error("Program linking error:",r.getProgramInfoLog(A)),null)}initShaders(){const r=this.gl,d=`#version 300 es
      precision highp float;
      
      uniform mat4 modelViewProjection;
      uniform vec4 color;
      uniform float cameraDistance;
  
      in vec3 position;
      in vec2 point;
      in vec3 charSize;
      in vec4 texturePosition;
  
      out vec2 vPoint;
      out vec4 vColor;
  
      void main() {
        vec3 pos = position + vec3(vec2(point) * charSize.xy, 0.0);
        gl_Position = modelViewProjection * vec4(pos, 1.0);
        vPoint = texturePosition.xy + point * texturePosition.zw;
        vColor = color;
        //vColor[3] *= (1. - smoothstep(0.0, 1., cameraDistance / (5000. * charSize.z)));
      }`,s=`#version 300 es
      precision highp float;
      
      uniform sampler2D msdf;
      uniform float bias;
      uniform float opacity;
  
      in vec2 vPoint;
      in vec4 vColor;
  
      out vec4 fragColor;
  
      float median(float r, float g, float b) {
        return max(min(r, g), min(max(r, g), b));
      }
  
      void main() {
        vec3 tsample = texture(msdf, vPoint).rgb;
        float sigDist = median(tsample.r, tsample.g, tsample.b) - bias;
        float alpha = clamp(sigDist / fwidth(sigDist) + bias, 0.0, 1.0);
        fragColor = vec4(vColor.rgb, vColor.a * alpha * opacity);
      }`,A=this.createShader(r,r.VERTEX_SHADER,d),D=this.createShader(r,r.FRAGMENT_SHADER,s);this.program=this.createProgram(r,A,D),this.locations={position:r.getAttribLocation(this.program,"position"),point:r.getAttribLocation(this.program,"point"),charSize:r.getAttribLocation(this.program,"charSize"),texturePosition:r.getAttribLocation(this.program,"texturePosition"),modelViewProjection:r.getUniformLocation(this.program,"modelViewProjection"),color:r.getUniformLocation(this.program,"color"),cameraDistance:r.getUniformLocation(this.program,"cameraDistance"),bias:r.getUniformLocation(this.program,"bias"),opacity:r.getUniformLocation(this.program,"opacity"),msdf:r.getUniformLocation(this.program,"msdf")}}initBuffers(){const r=this.gl;this.vao=r.createVertexArray(),r.bindVertexArray(this.vao),this.buffers={position:r.createBuffer(),point:r.createBuffer(),charSize:r.createBuffer(),texturePosition:r.createBuffer()};const d=new Float32Array([0,0,1,0,1,1,1,1,0,0,0,1]);r.bindBuffer(r.ARRAY_BUFFER,this.buffers.point),r.bufferData(r.ARRAY_BUFFER,d,r.STATIC_DRAW),r.enableVertexAttribArray(this.locations.point),r.vertexAttribPointer(this.locations.point,2,r.FLOAT,!1,0,0),r.vertexAttribDivisor(this.locations.point,0),r.bindVertexArray(null)}addText(r){if(!this.isReady)return;let{text:d,x:s=0,y:A=0,z:D=0}=r;if(!d)return;let E=0,Y=r.fontSize;if(r.limit!==void 0){let _=0;for(let U of d){let Q=this.alphabet.get(U);Q||(Q=this.alphabet.get("_")),_+=Q.xadvance}Y=r.limit*this.fontInfo.info.size/_}const te=Y/this.fontInfo.info.size;if(r.cx!==void 0){let _=0;for(const U of d){let Q=this.alphabet.get(U);Q||(Q=this.alphabet.get("_")),_+=Q.xadvance}E-=_*r.cx*te}r.cy!==void 0&&(A+=Y*r.cy);for(const _ of d){let U=this.alphabet.get(_);U||(U=this.alphabet.get("_")),this.positions.push(s+E,A-U.yoffset*te,D),this.charSizes.push(Y*U.width/42,-Y*U.height/42,Y),this.texturePositions.push(U.x/this.sdfTextureWidth,1-U.y/this.sdfTextureHeight,U.width/this.sdfTextureWidth,-U.height/this.sdfTextureHeight),E+=U.xadvance*te}}uploadBuffers(){const r=this.gl;r.bindVertexArray(this.vao),r.bindBuffer(r.ARRAY_BUFFER,this.buffers.position),r.bufferData(r.ARRAY_BUFFER,new Float32Array(this.positions),r.STATIC_DRAW),r.enableVertexAttribArray(this.locations.position),r.vertexAttribPointer(this.locations.position,3,r.FLOAT,!1,0,0),r.vertexAttribDivisor(this.locations.position,1),r.bindBuffer(r.ARRAY_BUFFER,this.buffers.charSize),r.bufferData(r.ARRAY_BUFFER,new Float32Array(this.charSizes),r.STATIC_DRAW),r.enableVertexAttribArray(this.locations.charSize),r.vertexAttribPointer(this.locations.charSize,3,r.FLOAT,!1,0,0),r.vertexAttribDivisor(this.locations.charSize,1),r.bindBuffer(r.ARRAY_BUFFER,this.buffers.texturePosition),r.bufferData(r.ARRAY_BUFFER,new Float32Array(this.texturePositions),r.STATIC_DRAW),r.enableVertexAttribArray(this.locations.texturePosition),r.vertexAttribPointer(this.locations.texturePosition,4,r.FLOAT,!1,0,0),r.vertexAttribDivisor(this.locations.texturePosition,1),r.bindVertexArray(null)}draw(r,d){const s=this.gl;if(!this.isReady||this.positions.length===0)return;s.useProgram(this.program),s.bindVertexArray(this.vao),s.uniformMatrix4fv(this.locations.modelViewProjection,!1,r),s.uniform1f(this.locations.cameraDistance,d),s.uniform1f(this.locations.opacity,this.opacity),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.texture),s.uniform1i(this.locations.msdf,0);const A=this.positions.length/3;s.uniform4f(this.locations.color,1,1,1,1),s.uniform1f(this.locations.bias,.5),s.drawArraysInstanced(s.TRIANGLES,0,6,A),s.bindVertexArray(null)}clear(){this.positions=[],this.charSizes=[],this.texturePositions=[]}}function Fe(k){return k&&k.__esModule&&Object.prototype.hasOwnProperty.call(k,"default")?k.default:k}var xe={exports:{}};/* @license
Papa Parse
v5.5.1
https://github.com/mholt/PapaParse
License: MIT
*/var ze=xe.exports,Pe;function Oe(){return Pe||(Pe=1,function(k,r){((d,s)=>{k.exports=s()})(ze,function d(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},A,D=!s.document&&!!s.postMessage,E=s.IS_PAPA_WORKER||!1,Y={},te=0,_={};function U(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(e){var i=x(e);i.chunkSize=parseInt(i.chunkSize),e.step||e.chunk||(i.chunkSize=null),this._handle=new w(i),(this._handle.streamer=this)._config=i}).call(this,t),this.parseChunk=function(e,i){var f=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<f){let m=this._config.newline;m||(n=this._config.quoteChar||'"',m=this._handle.guessLineEndings(e,n)),e=[...e.split(m).slice(f)].join(m)}this.isFirstChunk&&o(this._config.beforeFirstChunk)&&(n=this._config.beforeFirstChunk(e))!==void 0&&(e=n),this.isFirstChunk=!1,this._halted=!1;var f=this._partialLine+e,n=(this._partialLine="",this._handle.parse(f,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(e=n.meta.cursor,f=(this._finished||(this._partialLine=f.substring(e-this._baseIndex),this._baseIndex=e),n&&n.data&&(this._rowCount+=n.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),E)s.postMessage({results:n,workerId:_.WORKER_ID,finished:f});else if(o(this._config.chunk)&&!i){if(this._config.chunk(n,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=n=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(n.data),this._completeResults.errors=this._completeResults.errors.concat(n.errors),this._completeResults.meta=n.meta),this._completed||!f||!o(this._config.complete)||n&&n.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),f||n&&n.meta.paused||this._nextChunk(),n}this._halted=!0},this._sendError=function(e){o(this._config.error)?this._config.error(e):E&&this._config.error&&s.postMessage({workerId:_.WORKER_ID,error:e,finished:!1})}}function Q(t){var e;(t=t||{}).chunkSize||(t.chunkSize=_.RemoteChunkSize),U.call(this,t),this._nextChunk=D?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(i){this._input=i,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),D||(e.onload=L(this._chunkLoaded,this),e.onerror=L(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!D),this._config.downloadRequestHeaders){var i,f=this._config.downloadRequestHeaders;for(i in f)e.setRequestHeader(i,f[i])}var n;this._config.chunkSize&&(n=this._start+this._config.chunkSize-1,e.setRequestHeader("Range","bytes="+this._start+"-"+n));try{e.send(this._config.downloadRequestBody)}catch(m){this._chunkError(m.message)}D&&e.status===0&&this._chunkError()}},this._chunkLoaded=function(){e.readyState===4&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize||e.responseText.length,this._finished=!this._config.chunkSize||this._start>=(i=>(i=i.getResponseHeader("Content-Range"))!==null?parseInt(i.substring(i.lastIndexOf("/")+1)):-1)(e),this.parseChunk(e.responseText)))},this._chunkError=function(i){i=e.statusText||i,this._sendError(new Error(i))}}function re(t){(t=t||{}).chunkSize||(t.chunkSize=_.LocalChunkSize),U.call(this,t);var e,i,f=typeof FileReader<"u";this.stream=function(n){this._input=n,i=n.slice||n.webkitSlice||n.mozSlice,f?((e=new FileReader).onload=L(this._chunkLoaded,this),e.onerror=L(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var n=this._input,m=(this._config.chunkSize&&(m=Math.min(this._start+this._config.chunkSize,this._input.size),n=i.call(n,this._start,m)),e.readAsText(n,this._config.encoding));f||this._chunkLoaded({target:{result:m}})},this._chunkLoaded=function(n){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(n.target.result)},this._chunkError=function(){this._sendError(e.error)}}function he(t){var e;U.call(this,t=t||{}),this.stream=function(i){return e=i,this._nextChunk()},this._nextChunk=function(){var i,f;if(!this._finished)return i=this._config.chunkSize,e=i?(f=e.substring(0,i),e.substring(i)):(f=e,""),this._finished=!e,this.parseChunk(f)}}function Z(t){U.call(this,t=t||{});var e=[],i=!0,f=!1;this.pause=function(){U.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){U.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(n){this._input=n,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){f&&e.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):i=!0},this._streamData=L(function(n){try{e.push(typeof n=="string"?n:n.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(m){this._streamError(m)}},this),this._streamError=L(function(n){this._streamCleanUp(),this._sendError(n)},this),this._streamEnd=L(function(){this._streamCleanUp(),f=!0,this._streamData("")},this),this._streamCleanUp=L(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function w(t){var e,i,f,n,m=Math.pow(2,53),B=-m,S=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,T=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,b=this,p=0,F=0,h=!1,V=!1,g=[],u={data:[],errors:[],meta:{}};function N(v){return t.skipEmptyLines==="greedy"?v.join("").trim()==="":v.length===1&&v[0].length===0}function q(){if(u&&f&&($("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+_.DefaultDelimiter+"'"),f=!1),t.skipEmptyLines&&(u.data=u.data.filter(function(W){return!N(W)})),C()){let W=function(G,z){o(t.transformHeader)&&(G=t.transformHeader(G,z)),g.push(G)};var j=W;if(u)if(Array.isArray(u.data[0])){for(var v=0;C()&&v<u.data.length;v++)u.data[v].forEach(W);u.data.splice(0,1)}else u.data.forEach(W)}function M(W,G){for(var z=t.header?{}:[],O=0;O<W.length;O++){var H=O,P=W[O],P=((ie,X)=>(J=>(t.dynamicTypingFunction&&t.dynamicTyping[J]===void 0&&(t.dynamicTyping[J]=t.dynamicTypingFunction(J)),(t.dynamicTyping[J]||t.dynamicTyping)===!0))(ie)?X==="true"||X==="TRUE"||X!=="false"&&X!=="FALSE"&&((J=>{if(S.test(J)&&(J=parseFloat(J),B<J&&J<m))return 1})(X)?parseFloat(X):T.test(X)?new Date(X):X===""?null:X):X)(H=t.header?O>=g.length?"__parsed_extra":g[O]:H,P=t.transform?t.transform(P,H):P);H==="__parsed_extra"?(z[H]=z[H]||[],z[H].push(P)):z[H]=P}return t.header&&(O>g.length?$("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+O,F+G):O<g.length&&$("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+O,F+G)),z}var I;u&&(t.header||t.dynamicTyping||t.transform)&&(I=1,!u.data.length||Array.isArray(u.data[0])?(u.data=u.data.map(M),I=u.data.length):u.data=M(u.data,0),t.header&&u.meta&&(u.meta.fields=g),F+=I)}function C(){return t.header&&g.length===0}function $(v,M,I,j){v={type:v,code:M,message:I},j!==void 0&&(v.row=j),u.errors.push(v)}o(t.step)&&(n=t.step,t.step=function(v){u=v,C()?q():(q(),u.data.length!==0&&(p+=v.data.length,t.preview&&p>t.preview?i.abort():(u.data=u.data[0],n(u,b))))}),this.parse=function(v,M,I){var j=t.quoteChar||'"',j=(t.newline||(t.newline=this.guessLineEndings(v,j)),f=!1,t.delimiter?o(t.delimiter)&&(t.delimiter=t.delimiter(v),u.meta.delimiter=t.delimiter):((j=((W,G,z,O,H)=>{var P,ie,X,J;H=H||[",","	","|",";",_.RECORD_SEP,_.UNIT_SEP];for(var pe=0;pe<H.length;pe++){for(var fe,ee=H[pe],ce=0,K=0,se=0,oe=(X=void 0,new a({comments:O,delimiter:ee,newline:G,preview:10}).parse(W)),de=0;de<oe.data.length;de++)z&&N(oe.data[de])?se++:(fe=oe.data[de].length,K+=fe,X===void 0?X=fe:0<fe&&(ce+=Math.abs(fe-X),X=fe));0<oe.data.length&&(K/=oe.data.length-se),(ie===void 0||ce<=ie)&&(J===void 0||J<K)&&1.99<K&&(ie=ce,P=ee,J=K)}return{successful:!!(t.delimiter=P),bestDelimiter:P}})(v,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=j.bestDelimiter:(f=!0,t.delimiter=_.DefaultDelimiter),u.meta.delimiter=t.delimiter),x(t));return t.preview&&t.header&&j.preview++,e=v,i=new a(j),u=i.parse(e,M,I),q(),h?{meta:{paused:!0}}:u||{meta:{paused:!1}}},this.paused=function(){return h},this.pause=function(){h=!0,i.abort(),e=o(t.chunk)?"":e.substring(i.getCharIndex())},this.resume=function(){b.streamer._halted?(h=!1,b.streamer.parseChunk(e,!0)):setTimeout(b.resume,3)},this.aborted=function(){return V},this.abort=function(){V=!0,i.abort(),u.meta.aborted=!0,o(t.complete)&&t.complete(u),e=""},this.guessLineEndings=function(W,j){W=W.substring(0,1048576);var j=new RegExp(y(j)+"([^]*?)"+y(j),"gm"),I=(W=W.replace(j,"")).split("\r"),j=W.split(`
`),W=1<j.length&&j[0].length<I[0].length;if(I.length===1||W)return`
`;for(var G=0,z=0;z<I.length;z++)I[z][0]===`
`&&G++;return G>=I.length/2?`\r
`:"\r"}}function y(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(t){var e=(t=t||{}).delimiter,i=t.newline,f=t.comments,n=t.step,m=t.preview,B=t.fastMode,S=null,T=t.quoteChar==null?'"':t.quoteChar,b=T;if(t.escapeChar!==void 0&&(b=t.escapeChar),(typeof e!="string"||-1<_.BAD_DELIMITERS.indexOf(e))&&(e=","),f===e)throw new Error("Comment character same as delimiter");f===!0?f="#":(typeof f!="string"||-1<_.BAD_DELIMITERS.indexOf(f))&&(f=!1),i!==`
`&&i!=="\r"&&i!==`\r
`&&(i=`
`);var p=0,F=!1;this.parse=function(h,V,g){if(typeof h!="string")throw new Error("Input must be a string");var u=h.length,N=e.length,q=i.length,C=f.length,$=o(n),v=[],M=[],I=[],j=p=0;if(!h)return ee();if(B||B!==!1&&h.indexOf(T)===-1){for(var W=h.split(i),G=0;G<W.length;G++){if(I=W[G],p+=I.length,G!==W.length-1)p+=i.length;else if(g)return ee();if(!f||I.substring(0,C)!==f){if($){if(v=[],X(I.split(e)),ce(),F)return ee()}else X(I.split(e));if(m&&m<=G)return v=v.slice(0,m),ee(!0)}}return ee()}for(var z=h.indexOf(e,p),O=h.indexOf(i,p),H=new RegExp(y(b)+y(T),"g"),P=h.indexOf(T,p);;)if(h[p]===T)for(P=p,p++;;){if((P=h.indexOf(T,P+1))===-1)return g||M.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:v.length,index:p}),pe();if(P===u-1)return pe(h.substring(p,P).replace(H,T));if(T===b&&h[P+1]===b)P++;else if(T===b||P===0||h[P-1]!==b){z!==-1&&z<P+1&&(z=h.indexOf(e,P+1));var ie=J((O=O!==-1&&O<P+1?h.indexOf(i,P+1):O)===-1?z:Math.min(z,O));if(h.substr(P+1+ie,N)===e){I.push(h.substring(p,P).replace(H,T)),h[p=P+1+ie+N]!==T&&(P=h.indexOf(T,p)),z=h.indexOf(e,p),O=h.indexOf(i,p);break}if(ie=J(O),h.substring(P+1+ie,P+1+ie+q)===i){if(I.push(h.substring(p,P).replace(H,T)),fe(P+1+ie+q),z=h.indexOf(e,p),P=h.indexOf(T,p),$&&(ce(),F))return ee();if(m&&v.length>=m)return ee(!0);break}M.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:v.length,index:p}),P++}}else if(f&&I.length===0&&h.substring(p,p+C)===f){if(O===-1)return ee();p=O+q,O=h.indexOf(i,p),z=h.indexOf(e,p)}else if(z!==-1&&(z<O||O===-1))I.push(h.substring(p,z)),p=z+N,z=h.indexOf(e,p);else{if(O===-1)break;if(I.push(h.substring(p,O)),fe(O+q),$&&(ce(),F))return ee();if(m&&v.length>=m)return ee(!0)}return pe();function X(K){v.push(K),j=p}function J(K){var se=0;return se=K!==-1&&(K=h.substring(P+1,K))&&K.trim()===""?K.length:se}function pe(K){return g||(K===void 0&&(K=h.substring(p)),I.push(K),p=u,X(I),$&&ce()),ee()}function fe(K){p=K,X(I),I=[],O=h.indexOf(i,p)}function ee(K){if(t.header&&!V&&v.length){var se=v[0],oe={},de=new Set(se);let ke=!1;for(let ge=0;ge<se.length;ge++){let le=se[ge];if(oe[le=o(t.transformHeader)?t.transformHeader(le,ge):le]){let ve,Le=oe[le];for(;ve=le+"_"+Le,Le++,de.has(ve););de.add(ve),se[ge]=ve,oe[le]++,ke=!0,(S=S===null?{}:S)[ve]=le}else oe[le]=1,se[ge]=le;de.add(le)}ke&&console.warn("Duplicate headers found and renamed.")}return{data:v,errors:M,meta:{delimiter:e,linebreak:i,aborted:F,truncated:!!K,cursor:j+(V||0),renamedHeaders:S}}}function ce(){n(ee()),v=[],M=[]}},this.abort=function(){F=!0},this.getCharIndex=function(){return p}}function c(t){var e=t.data,i=Y[e.workerId],f=!1;if(e.error)i.userError(e.error,e.file);else if(e.results&&e.results.data){var n={abort:function(){f=!0,l(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:R,resume:R};if(o(i.userStep)){for(var m=0;m<e.results.data.length&&(i.userStep({data:e.results.data[m],errors:e.results.errors,meta:e.results.meta},n),!f);m++);delete e.results}else o(i.userChunk)&&(i.userChunk(e.results,n,e.file),delete e.results)}e.finished&&!f&&l(e.workerId,e.results)}function l(t,e){var i=Y[t];o(i.userComplete)&&i.userComplete(e),i.terminate(),delete Y[t]}function R(){throw new Error("Not implemented.")}function x(t){if(typeof t!="object"||t===null)return t;var e,i=Array.isArray(t)?[]:{};for(e in t)i[e]=x(t[e]);return i}function L(t,e){return function(){t.apply(e,arguments)}}function o(t){return typeof t=="function"}return _.parse=function(t,e){var i=(e=e||{}).dynamicTyping||!1;if(o(i)&&(e.dynamicTypingFunction=i,i={}),e.dynamicTyping=i,e.transform=!!o(e.transform)&&e.transform,!e.worker||!_.WORKERS_SUPPORTED)return i=null,_.NODE_STREAM_INPUT,typeof t=="string"?(t=(f=>f.charCodeAt(0)!==65279?f:f.slice(1))(t),i=new(e.download?Q:he)(e)):t.readable===!0&&o(t.read)&&o(t.on)?i=new Z(e):(s.File&&t instanceof File||t instanceof Object)&&(i=new re(e)),i.stream(t);(i=(()=>{var f;return!!_.WORKERS_SUPPORTED&&(f=(()=>{var n=s.URL||s.webkitURL||null,m=d.toString();return _.BLOB_URL||(_.BLOB_URL=n.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",m,")();"],{type:"text/javascript"})))})(),(f=new s.Worker(f)).onmessage=c,f.id=te++,Y[f.id]=f)})()).userStep=e.step,i.userChunk=e.chunk,i.userComplete=e.complete,i.userError=e.error,e.step=o(e.step),e.chunk=o(e.chunk),e.complete=o(e.complete),e.error=o(e.error),delete e.worker,i.postMessage({input:t,config:e,workerId:i.id})},_.unparse=function(t,e){var i=!1,f=!0,n=",",m=`\r
`,B='"',S=B+B,T=!1,b=null,p=!1,F=((()=>{if(typeof e=="object"){if(typeof e.delimiter!="string"||_.BAD_DELIMITERS.filter(function(g){return e.delimiter.indexOf(g)!==-1}).length||(n=e.delimiter),typeof e.quotes!="boolean"&&typeof e.quotes!="function"&&!Array.isArray(e.quotes)||(i=e.quotes),typeof e.skipEmptyLines!="boolean"&&typeof e.skipEmptyLines!="string"||(T=e.skipEmptyLines),typeof e.newline=="string"&&(m=e.newline),typeof e.quoteChar=="string"&&(B=e.quoteChar),typeof e.header=="boolean"&&(f=e.header),Array.isArray(e.columns)){if(e.columns.length===0)throw new Error("Option columns is empty");b=e.columns}e.escapeChar!==void 0&&(S=e.escapeChar+B),e.escapeFormulae instanceof RegExp?p=e.escapeFormulae:typeof e.escapeFormulae=="boolean"&&e.escapeFormulae&&(p=/^[=+\-@\t\r].*$/)}})(),new RegExp(y(B),"g"));if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return h(null,t,T);if(typeof t[0]=="object")return h(b||Object.keys(t[0]),t,T)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||b),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),h(t.fields||[],t.data||[],T);throw new Error("Unable to serialize unrecognized input");function h(g,u,N){var q="",C=(typeof g=="string"&&(g=JSON.parse(g)),typeof u=="string"&&(u=JSON.parse(u)),Array.isArray(g)&&0<g.length),$=!Array.isArray(u[0]);if(C&&f){for(var v=0;v<g.length;v++)0<v&&(q+=n),q+=V(g[v],v);0<u.length&&(q+=m)}for(var M=0;M<u.length;M++){var I=(C?g:u[M]).length,j=!1,W=C?Object.keys(u[M]).length===0:u[M].length===0;if(N&&!C&&(j=N==="greedy"?u[M].join("").trim()==="":u[M].length===1&&u[M][0].length===0),N==="greedy"&&C){for(var G=[],z=0;z<I;z++){var O=$?g[z]:z;G.push(u[M][O])}j=G.join("").trim()===""}if(!j){for(var H=0;H<I;H++){0<H&&!W&&(q+=n);var P=C&&$?g[H]:H;q+=V(u[M][P],H)}M<u.length-1&&(!N||0<I&&!W)&&(q+=m)}}return q}function V(g,u){var N,q;return g==null?"":g.constructor===Date?JSON.stringify(g).slice(1,25):(q=!1,p&&typeof g=="string"&&p.test(g)&&(g="'"+g,q=!0),N=g.toString().replace(F,S),(q=q||i===!0||typeof i=="function"&&i(g,u)||Array.isArray(i)&&i[u]||((C,$)=>{for(var v=0;v<$.length;v++)if(-1<C.indexOf($[v]))return!0;return!1})(N,_.BAD_DELIMITERS)||-1<N.indexOf(n)||N.charAt(0)===" "||N.charAt(N.length-1)===" ")?B+N+B:N)}},_.RECORD_SEP="",_.UNIT_SEP="",_.BYTE_ORDER_MARK="\uFEFF",_.BAD_DELIMITERS=["\r",`
`,'"',_.BYTE_ORDER_MARK],_.WORKERS_SUPPORTED=!D&&!!s.Worker,_.NODE_STREAM_INPUT=1,_.LocalChunkSize=10485760,_.RemoteChunkSize=5242880,_.DefaultDelimiter=",",_.Parser=a,_.ParserHandle=w,_.NetworkStreamer=Q,_.FileStreamer=re,_.StringStreamer=he,_.ReadableStreamStreamer=Z,s.jQuery&&((A=s.jQuery).fn.parse=function(t){var e=t.config||{},i=[];return this.each(function(m){if(!(A(this).prop("tagName").toUpperCase()==="INPUT"&&A(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var B=0;B<this.files.length;B++)i.push({file:this.files[B],inputElem:this,instanceConfig:A.extend({},e)})}),f(),this;function f(){if(i.length===0)o(t.complete)&&t.complete();else{var m,B,S,T,b=i[0];if(o(t.before)){var p=t.before(b.file,b.inputElem);if(typeof p=="object"){if(p.action==="abort")return m="AbortError",B=b.file,S=b.inputElem,T=p.reason,void(o(t.error)&&t.error({name:m},B,S,T));if(p.action==="skip")return void n();typeof p.config=="object"&&(b.instanceConfig=A.extend(b.instanceConfig,p.config))}else if(p==="skip")return void n()}var F=b.instanceConfig.complete;b.instanceConfig.complete=function(h){o(F)&&F(h,b.file,b.inputElem),n()},_.parse(b.file,b.instanceConfig)}}function n(){i.splice(0,1),f()}}),E&&(s.onmessage=function(t){t=t.data,_.WORKER_ID===void 0&&t&&(_.WORKER_ID=t.workerId),typeof t.input=="string"?s.postMessage({workerId:_.WORKER_ID,results:_.parse(t.input,t.config),finished:!0}):(s.File&&t.input instanceof File||t.input instanceof Object)&&(t=_.parse(t.input,t.config))&&s.postMessage({workerId:_.WORKER_ID,results:t,finished:!0})}),(Q.prototype=Object.create(U.prototype)).constructor=Q,(re.prototype=Object.create(U.prototype)).constructor=re,(he.prototype=Object.create(he.prototype)).constructor=he,(Z.prototype=Object.create(U.prototype)).constructor=Z,_})}(xe)),xe.exports}var Ue=Oe();const Me=Fe(Ue);function Ne(k){throw new Error('Could not dynamically require "'+k+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var be={exports:{}},qe=be.exports,Ie;function je(){return Ie||(Ie=1,function(k){(function(r,d){k.exports?k.exports=d():r.fuzzysort=d()})(qe,function(){function d(w){var y={single:function(a,c,l){if(!a||(re(a)||(a=y.getPreparedSearch(a)),!c))return null;re(c)||(c=y.getPrepared(c));var R=l&&l.allowTypo!==void 0?l.allowTypo:w&&w.allowTypo!==void 0?w.allowTypo:!0,x=R?y.algorithm:y.algorithmNoTypo;return x(a,c,a[0])},go:function(a,c,l){if(!a)return E;a=y.prepareSearch(a);var R=a[0],x=l&&l.threshold||w&&w.threshold||-9007199254740991,L=l&&l.limit||w&&w.limit||9007199254740991,o=l&&l.allowTypo!==void 0?l.allowTypo:w&&w.allowTypo!==void 0?w.allowTypo:!0,t=o?y.algorithm:y.algorithmNoTypo,e=0,i=0,f=c.length;if(l&&l.keys)for(var n=l.scoreFn||U,m=l.keys,B=m.length,S=f-1;S>=0;--S){for(var T=c[S],b=new Array(B),p=B-1;p>=0;--p){var F=m[p],h=Q(T,F);if(!h){b[p]=null;continue}re(h)||(h=y.getPrepared(h)),b[p]=t(a,h,R)}b.obj=T;var V=n(b);V!==null&&(V<x||(b.score=V,e<L?(Z.add(b),++e):(++i,V>Z.peek().score&&Z.replaceTop(b))))}else if(l&&l.key)for(var F=l.key,S=f-1;S>=0;--S){var T=c[S],h=Q(T,F);if(h){re(h)||(h=y.getPrepared(h));var g=t(a,h,R);g!==null&&(g.score<x||(g={target:g.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:g.score,indexes:g.indexes,obj:T},e<L?(Z.add(g),++e):(++i,g.score>Z.peek().score&&Z.replaceTop(g))))}}else for(var S=f-1;S>=0;--S){var h=c[S];if(h){re(h)||(h=y.getPrepared(h));var g=t(a,h,R);g!==null&&(g.score<x||(e<L?(Z.add(g),++e):(++i,g.score>Z.peek().score&&Z.replaceTop(g))))}}if(e===0)return E;for(var u=new Array(e),S=e-1;S>=0;--S)u[S]=Z.poll();return u.total=e+i,u},goAsync:function(a,c,l){var R=!1,x=new Promise(function(L,o){if(!a)return L(E);a=y.prepareSearch(a);var t=a[0],e=he(),i=c.length-1,f=l&&l.threshold||w&&w.threshold||-9007199254740991,n=l&&l.limit||w&&w.limit||9007199254740991,m=l&&l.allowTypo!==void 0?l.allowTypo:w&&w.allowTypo!==void 0?w.allowTypo:!0,B=m?y.algorithm:y.algorithmNoTypo,S=0,T=0;function b(){if(R)return o("canceled");var p=Date.now();if(l&&l.keys)for(var F=l.scoreFn||U,h=l.keys,V=h.length;i>=0;--i){for(var g=c[i],u=new Array(V),N=V-1;N>=0;--N){var q=h[N],C=Q(g,q);if(!C){u[N]=null;continue}re(C)||(C=y.getPrepared(C)),u[N]=B(a,C,t)}u.obj=g;var $=F(u);if($!==null&&!($<f)&&(u.score=$,S<n?(e.add(u),++S):(++T,$>e.peek().score&&e.replaceTop(u)),i%1e3===0&&Date.now()-p>=10)){s?setImmediate(b):setTimeout(b);return}}else if(l&&l.key)for(var q=l.key;i>=0;--i){var g=c[i],C=Q(g,q);if(C){re(C)||(C=y.getPrepared(C));var v=B(a,C,t);if(v!==null&&!(v.score<f)&&(v={target:v.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:v.score,indexes:v.indexes,obj:g},S<n?(e.add(v),++S):(++T,v.score>e.peek().score&&e.replaceTop(v)),i%1e3===0&&Date.now()-p>=10)){s?setImmediate(b):setTimeout(b);return}}}else for(;i>=0;--i){var C=c[i];if(C){re(C)||(C=y.getPrepared(C));var v=B(a,C,t);if(v!==null&&!(v.score<f)&&(S<n?(e.add(v),++S):(++T,v.score>e.peek().score&&e.replaceTop(v)),i%1e3===0&&Date.now()-p>=10)){s?setImmediate(b):setTimeout(b);return}}}if(S===0)return L(E);for(var M=new Array(S),I=S-1;I>=0;--I)M[I]=e.poll();M.total=S+T,L(M)}s?setImmediate(b):b()});return x.cancel=function(){R=!0},x},highlight:function(a,c,l){if(a===null)return null;c===void 0&&(c="<b>"),l===void 0&&(l="</b>");for(var R="",x=0,L=!1,o=a.target,t=o.length,e=a.indexes,i=0;i<t;++i){var f=o[i];if(e[x]===i){if(++x,L||(L=!0,R+=c),x===e.length){R+=f+l+o.substr(i+1);break}}else L&&(L=!1,R+=l);R+=f}return R},prepare:function(a){if(a)return{target:a,_targetLowerCodes:y.prepareLowerCodes(a),_nextBeginningIndexes:null,score:null,indexes:null,obj:null}},prepareSlow:function(a){if(a)return{target:a,_targetLowerCodes:y.prepareLowerCodes(a),_nextBeginningIndexes:y.prepareNextBeginningIndexes(a),score:null,indexes:null,obj:null}},prepareSearch:function(a){if(a)return y.prepareLowerCodes(a)},getPrepared:function(a){if(a.length>999)return y.prepare(a);var c=A.get(a);return c!==void 0||(c=y.prepare(a),A.set(a,c)),c},getPreparedSearch:function(a){if(a.length>999)return y.prepareSearch(a);var c=D.get(a);return c!==void 0||(c=y.prepareSearch(a),D.set(a,c)),c},algorithm:function(a,c,l){for(var R=c._targetLowerCodes,x=a.length,L=R.length,n=0,o=0,t=0,e=0;;){var i=l===R[o];if(i){if(Y[e++]=o,++n,n===x)break;l=a[t===0?n:t===n?n+1:t===n-1?n-1:n]}if(++o,o>=L)for(;;){if(n<=1)return null;if(t===0){--n;var f=a[n];if(l===f)continue;t=n}else{if(t===1)return null;--t,n=t,l=a[n+1];var f=a[n];if(l===f)continue}e=n,o=Y[e-1]+1;break}}var n=0,m=0,B=!1,S=0,T=c._nextBeginningIndexes;T===null&&(T=c._nextBeginningIndexes=y.prepareNextBeginningIndexes(c.target));var b=o=Y[0]===0?0:T[Y[0]-1];if(o!==L)for(;;)if(o>=L){if(n<=0){if(++m,m>x-2)break;if(a[m]===a[m+1])continue;o=b;continue}--n;var p=te[--S];o=T[p]}else{var i=a[m===0?n:m===n?n+1:m===n-1?n-1:n]===R[o];if(i){if(te[S++]=o,++n,n===x){B=!0;break}++o}else o=T[o]}{if(B)var F=te,h=S;else var F=Y,h=e;for(var V=0,g=-1,u=0;u<x;++u){var o=F[u];g!==o-1&&(V-=o),g=o}B?m!==0&&(V+=-20):(V*=1e3,t!==0&&(V+=-20)),V-=L-x,c.score=V,c.indexes=new Array(h);for(var u=h-1;u>=0;--u)c.indexes[u]=F[u];return c}},algorithmNoTypo:function(a,c,l){for(var R=c._targetLowerCodes,x=a.length,L=R.length,i=0,o=0,t=0;;){var e=l===R[o];if(e){if(Y[t++]=o,++i,i===x)break;l=a[i]}if(++o,o>=L)return null}var i=0,f=!1,n=0,m=c._nextBeginningIndexes;if(m===null&&(m=c._nextBeginningIndexes=y.prepareNextBeginningIndexes(c.target)),o=Y[0]===0?0:m[Y[0]-1],o!==L)for(;;)if(o>=L){if(i<=0)break;--i;var B=te[--n];o=m[B]}else{var e=a[i]===R[o];if(e){if(te[n++]=o,++i,i===x){f=!0;break}++o}else o=m[o]}{if(f)var S=te,T=n;else var S=Y,T=t;for(var b=0,p=-1,F=0;F<x;++F){var o=S[F];p!==o-1&&(b-=o),p=o}f||(b*=1e3),b-=L-x,c.score=b,c.indexes=new Array(T);for(var F=T-1;F>=0;--F)c.indexes[F]=S[F];return c}},prepareLowerCodes:function(a){for(var c=a.length,l=[],R=a.toLowerCase(),x=0;x<c;++x)l[x]=R.charCodeAt(x);return l},prepareBeginningIndexes:function(a){for(var c=a.length,l=[],R=0,x=!1,L=!1,o=0;o<c;++o){var t=a.charCodeAt(o),e=t>=65&&t<=90,i=e||t>=97&&t<=122||t>=48&&t<=57,f=e&&!x||!L||!i;x=e,L=i,f&&(l[R++]=o)}return l},prepareNextBeginningIndexes:function(a){for(var c=a.length,l=y.prepareBeginningIndexes(a),R=[],x=l[0],L=0,o=0;o<c;++o)x>o?R[o]=x:(x=l[++L],R[o]=x===void 0?c:x);return R},cleanup:_,new:d};return y}var s=typeof Ne<"u"&&typeof window>"u",A=new Map,D=new Map,E=[];E.total=0;var Y=[],te=[];function _(){A.clear(),D.clear(),Y=[],te=[]}function U(w){for(var y=-9007199254740991,a=w.length-1;a>=0;--a){var c=w[a];if(c!==null){var l=c.score;l>y&&(y=l)}}return y===-9007199254740991?null:y}function Q(w,y){var a=w[y];if(a!==void 0)return a;var c=y;Array.isArray(y)||(c=y.split("."));for(var l=c.length,R=-1;w&&++R<l;)w=w[c[R]];return w}function re(w){return typeof w=="object"}var he=function(){var w=[],y=0,a={};function c(){for(var l=0,R=w[l],x=1;x<y;){var L=x+1;l=x,L<y&&w[L].score<w[x].score&&(l=L),w[l-1>>1]=w[l],x=1+(l<<1)}for(var o=l-1>>1;l>0&&R.score<w[o].score;o=(l=o)-1>>1)w[l]=w[o];w[l]=R}return a.add=function(l){var R=y;w[y++]=l;for(var x=R-1>>1;R>0&&l.score<w[x].score;x=(R=x)-1>>1)w[R]=w[x];w[R]=l},a.poll=function(){if(y!==0){var l=w[0];return w[0]=w[--y],c(),l}},a.peek=function(l){if(y!==0)return w[0]},a.replaceTop=function(l){w[0]=l,c()},a},Z=he();return d()})}(be)),be.exports}var We=je();const He=Fe(We),ue=document.getElementById("webgl-canvas");ue.width=window.innerWidth;ue.height=window.innerHeight;const ae=ue.getContext("webgl2");if(!ae)throw alert("WebGL 2.0 is not supported in your browser."),new Error("WebGL 2.0 not supported.");ae.clearColor(0,0,0,1);ae.enable(ae.BLEND);ae.blendFunc(ae.SRC_ALPHA,ae.ONE_MINUS_SRC_ALPHA);let _e=20,Ee=0,Se=0,Re=!1,Ae=0,we=0;ue.addEventListener("mousedown",k=>{Re=!0,Ae=k.clientX,we=k.clientY});ue.addEventListener("mouseup",()=>{Re=!1});ue.addEventListener("mousemove",k=>{if(Re){const r=(k.clientX-Ae)*(_e/1e3),d=(k.clientY-we)*(_e/1e3);Ee-=r,Se+=d,Ae=k.clientX,we=k.clientY}});ue.addEventListener("wheel",k=>{const r=Math.exp(k.deltaY*.001);_e*=r});function Ve(){const k=ue.width/ue.height,r=1/_e;return new Float32Array([r/k,0,0,0,0,r,0,0,0,0,1,0,-Ee*r/k,-Se*r,0,1])}function Ye(k){const r=document.getElementById("search").value,d=document.getElementById("search-results");if(r===""){d.innerHTML="",d.style.display="none";return}k.length>0?(d.innerHTML=k.map(s=>`<div class="search-result-item" data-title="${s.target}">${s.target}</div>`).join(""),d.style.display="block",document.querySelectorAll(".search-result-item").forEach(s=>{s.addEventListener("click",A=>Ke(A))})):(d.innerHTML="<div>No results found</div>",d.style.display="block")}let ye=null;function Xe(){ye&&ye.cancel();let r=document.getElementById("search").value.replace(/\s+/g,"");return ye=He.goAsync(r,ne.titles,{limit:5}),ye.then(d=>Ye(d))}function Ke(k){const d=k.target.dataset.title;Ge(d)}document.getElementById("search").addEventListener("input",Xe);function Ge(k){const r=ne.titles.indexOf(k);Ee=ne.offsets[r*2],Se=ne.offsets[r*2+1],_e=ne.sizes[r]*10}const ne=new De(ae),me=new Be(ae);function $e(k){return new Promise((r,d)=>{Me.parse(k,{download:!0,header:!0,dynamicTyping:!1,skipEmptyLines:!0,complete:s=>r(s.data),error:s=>d(s)})})}async function Ce(){try{var k=document.getElementById("csv-select").value;const r=await $e(k);ne.setData(r),me.clear(),await me.loadFont();for(let d=0;d<ne.numCircles;d++)me.addText({text:ne.titles[d],x:ne.offsets[d*2],y:ne.offsets[d*2+1],limit:2*ne.sizes[d],cx:.51,cy:.5});me.uploadBuffers()}catch(r){console.error("Error initializing the application:",r)}}function Te(){ae.clear(ae.COLOR_BUFFER_BIT);const k=Ve();ne.draw(k),me.draw(k,1),requestAnimationFrame(Te)}Ce().then(Te);document.getElementById("load-button").addEventListener("click",function(){Ce().then(Te)});
