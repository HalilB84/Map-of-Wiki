(function(){"use strict";function de(z){return z&&z.__esModule&&Object.prototype.hasOwnProperty.call(z,"default")?z.default:z}var Y={exports:{}},xe=Y.exports,fe;function we(){return fe||(fe=1,(function(z){(($,E)=>{z.exports?z.exports=E():$.fuzzysort=E()})(xe,$=>{var E=(r,e)=>{if(!r||!e)return b;var n=_e(r);q(e)||(e=M(e));var t=n.bitflags;return(t&e._bitflags)!==t?b:D(n,e)},U=(r,e,n)=>{if(!r)return n?.all?Le(e,n):ie;var t=_e(r),f=t.bitflags,i=t.containsSpace,a=H(n?.threshold||0),v=n?.limit||ae,s=0,c=0,o=e.length;function y(O){s<v?(X.add(O),++s):(++c,O._score>X.peek()._score&&X.replaceTop(O))}if(n?.key)for(var S=n.key,_=0;_<o;++_){var I=e[_],g=W(I,S);if(g&&(q(g)||(g=M(g)),(f&g._bitflags)===f)){var d=D(t,g);d!==b&&(d._score<a||(d.obj=I,y(d)))}}else if(n?.keys){var T=n.keys,C=T.length;e:for(var _=0;_<o;++_){var I=e[_];{for(var L=0,u=0;u<C;++u){var S=T[u],g=W(I,S);if(!g){ne[u]=V;continue}q(g)||(g=M(g)),ne[u]=g,L|=g._bitflags}if((f&L)!==f)continue}if(i)for(let h=0;h<t.spaceSearches.length;h++)N[h]=m;for(var u=0;u<C;++u){if(g=ne[u],g===V){G[u]=V;continue}if(G[u]=D(t,g,!1,i),G[u]===b){G[u]=V;continue}if(i)for(let x=0;x<t.spaceSearches.length;x++){if(P[x]>-1e3&&N[x]>m){var p=(N[x]+P[x])/4;p>N[x]&&(N[x]=p)}P[x]>N[x]&&(N[x]=P[x])}}if(i){for(let h=0;h<t.spaceSearches.length;h++)if(N[h]===m)continue e}else{var l=!1;for(let h=0;h<C;h++)if(G[h]._score!==m){l=!0;break}if(!l)continue}var B=new le(C);for(let h=0;h<C;h++)B[h]=G[h];if(i){var w=0;for(let h=0;h<t.spaceSearches.length;h++)w+=N[h]}else{var w=m;for(let x=0;x<C;x++){var d=B[x];if(d._score>-1e3&&w>m){var p=(w+d._score)/4;p>w&&(w=p)}d._score>w&&(w=d._score)}}if(B.obj=I,B._score=w,n?.scoreFn){if(w=n.scoreFn(B),!w)continue;w=H(w),B._score=w}w<a||y(B)}}else for(var _=0;_<o;++_){var g=e[_];if(g&&(q(g)||(g=M(g)),(f&g._bitflags)===f)){var d=D(t,g);d!==b&&(d._score<a||y(d))}}if(s===0)return ie;for(var A=new Array(s),_=s-1;_>=0;--_)A[_]=X.poll();return A.total=s+c,A},R=(r,e="<b>",n="</b>")=>{for(var t=typeof e=="function"?e:void 0,f=r.target,i=f.length,a=r.indexes,v="",s=0,c=0,o=!1,y=[],S=0;S<i;++S){var _=f[S];if(a[c]===S){if(++c,o||(o=!0,t?(y.push(v),v=""):v+=e),c===a.length){t?(v+=_,y.push(t(v,s++)),v="",y.push(f.substr(S+1))):v+=_+n+f.substr(S+1);break}}else o&&(o=!1,t?(y.push(t(v,s++)),v=""):v+=n);v+=_}return t?y:v},K=r=>{typeof r=="number"?r=""+r:typeof r!="string"&&(r="");var e=j(r);return oe(r,{_targetLower:e._lower,_targetLowerCodes:e.lowerCodes,_bitflags:e.bitflags})},Se=()=>{ee.clear(),re.clear()};class ve{get indexes(){return this._indexes.slice(0,this._indexes.len).sort((e,n)=>e-n)}set indexes(e){return this._indexes=e}highlight(e,n){return R(this,e,n)}get score(){return ue(this._score)}set score(e){this._score=H(e)}}class le extends Array{get score(){return ue(this._score)}set score(e){this._score=H(e)}}var oe=(r,e)=>{const n=new ve;return n.target=r,n.obj=e.obj??b,n._score=e._score??m,n._indexes=e._indexes??[],n._targetLower=e._targetLower??"",n._targetLowerCodes=e._targetLowerCodes??b,n._nextBeginningIndexes=e._nextBeginningIndexes??b,n._bitflags=e._bitflags??0,n},ue=r=>r===m?0:r>1?r:Math.E**(((-r+1)**.04307-1)*-2),H=r=>r===0?m:r>1?r:1-Math.pow(Math.log(r)/-2+1,1/.04307),ce=r=>{typeof r=="number"?r=""+r:typeof r!="string"&&(r=""),r=r.trim();var e=j(r),n=[];if(e.containsSpace){var t=r.split(/\s+/);t=[...new Set(t)];for(var f=0;f<t.length;f++)if(t[f]!==""){var i=j(t[f]);n.push({lowerCodes:i.lowerCodes,_lower:t[f].toLowerCase(),containsSpace:!1})}}return{lowerCodes:e.lowerCodes,_lower:e._lower,containsSpace:e.containsSpace,bitflags:e.bitflags,spaceSearches:n}},M=r=>{if(r.length>999)return K(r);var e=ee.get(r);return e!==void 0||(e=K(r),ee.set(r,e)),e},_e=r=>{if(r.length>999)return ce(r);var e=re.get(r);return e!==void 0||(e=ce(r),re.set(r,e)),e},Le=(r,e)=>{var n=[];n.total=r.length;var t=e?.limit||ae;if(e?.key)for(var f=0;f<r.length;f++){var i=r[f],a=W(i,e.key);if(a!=b){q(a)||(a=M(a));var v=oe(a.target,{_score:a._score,obj:i});if(n.push(v),n.length>=t)return n}}else if(e?.keys)for(var f=0;f<r.length;f++){for(var i=r[f],s=new le(e.keys.length),c=e.keys.length-1;c>=0;--c){var a=W(i,e.keys[c]);if(!a){s[c]=V;continue}q(a)||(a=M(a)),a._score=m,a._indexes.len=0,s[c]=a}if(s.obj=i,s._score=m,n.push(s),n.length>=t)return n}else for(var f=0;f<r.length;f++){var a=r[f];if(a!=b&&(q(a)||(a=M(a)),a._score=m,a._indexes.len=0,n.push(a),n.length>=t))return n}return n},D=(r,e,n=!1,t=!1)=>{if(n===!1&&r.containsSpace)return Ie(r,e,t);for(var f=r._lower,i=r.lowerCodes,a=i[0],v=e._targetLowerCodes,s=i.length,c=v.length,_=0,o=0,y=0;;){var S=a===v[o];if(S){if(k[y++]=o,++_,_===s)break;a=i[_]}if(++o,o>=c)return b}var _=0,I=!1,g=0,d=e._nextBeginningIndexes;d===b&&(d=e._nextBeginningIndexes=me(e.target)),o=k[0]===0?0:d[k[0]-1];var T=0;if(o!==c)for(;;)if(o>=c){if(_<=0||(++T,T>200))break;--_;var C=J[--g];o=d[C]}else{var S=i[_]===v[o];if(S){if(J[g++]=o,++_,_===s){I=!0;break}++o}else o=d[o]}var L=s<=1?-1:e._targetLower.indexOf(f,k[0]),u=!!~L,p=u?L===0||e._nextBeginningIndexes[L-1]===L:!1;if(u&&!p){for(var l=0;l<d.length;l=d[l])if(!(l<=L)){for(var B=0;B<s&&i[B]===e._targetLowerCodes[l+B];B++);if(B===s){L=l,p=!0;break}}}var w=h=>{for(var x=0,he=0,F=1;F<s;++F)h[F]-h[F-1]!==1&&(x-=h[F],++he);var Ce=h[s-1]-h[0]-(s-1);if(x-=(12+Ce)*he,h[0]!==0&&(x-=h[0]*h[0]*.2),!I)x*=1e3;else{for(var te=1,F=d[0];F<c;F=d[F])++te;te>24&&(x*=(te-24)*10)}return x-=(c-s)/2,u&&(x/=1+s*s*1),p&&(x/=1+s*s*1),x-=(c-s)/2,x};if(I)if(p){for(var l=0;l<s;++l)k[l]=L+l;var A=k,O=w(k)}else var A=J,O=w(J);else{if(u)for(var l=0;l<s;++l)k[l]=L+l;var A=k,O=w(A)}e._score=O;for(var l=0;l<s;++l)e._indexes[l]=A[l];e._indexes.len=s;const Z=new ve;return Z.target=e.target,Z._score=e._score,Z._indexes=e._indexes,Z},Ie=(r,e,n)=>{for(var t=new Set,f=0,i=b,a=0,v=r.spaceSearches,s=v.length,c=0,o=()=>{for(let p=c-1;p>=0;p--)e._nextBeginningIndexes[Q[p*2+0]]=Q[p*2+1]},y=!1,u=0;u<s;++u){P[u]=m;var S=v[u];if(i=D(S,e),n){if(i===b)continue;y=!0}else if(i===b)return o(),b;var _=u===s-1;if(!_){var I=i._indexes,g=!0;for(let l=0;l<I.len-1;l++)if(I[l+1]-I[l]!==1){g=!1;break}if(g){var d=I[I.len-1]+1,T=e._nextBeginningIndexes[d-1];for(let l=d-1;l>=0&&T===e._nextBeginningIndexes[l];l--)e._nextBeginningIndexes[l]=d,Q[c*2+0]=l,Q[c*2+1]=T,c++}}f+=i._score/s,P[u]=i._score/s,i._indexes[0]<a&&(f-=(a-i._indexes[0])*2),a=i._indexes[0];for(var C=0;C<i._indexes.len;++C)t.add(i._indexes[C])}if(n&&!y)return b;o();var L=D(r,e,!0);if(L!==b&&L._score>f){if(n)for(var u=0;u<s;++u)P[u]=L._score/s;return L}n&&(i=e),i._score=f;var u=0;for(let p of t)i._indexes[u++]=p;return i._indexes.len=u,i},ge=r=>r.replace(new RegExp("\\p{Script=Latin}+","gu"),e=>e.normalize("NFD")).replace(/[\u0300-\u036f]/g,""),j=r=>{r=ge(r);for(var e=r.length,n=r.toLowerCase(),t=[],f=0,i=!1,a=0;a<e;++a){var v=t[a]=n.charCodeAt(a);if(v===32){i=!0;continue}var s=v>=97&&v<=122?v-97:v>=48&&v<=57?26:v<=127?30:31;f|=1<<s}return{lowerCodes:t,bitflags:f,containsSpace:i,_lower:n}},ye=r=>{for(var e=r.length,n=[],t=0,f=!1,i=!1,a=0;a<e;++a){var v=r.charCodeAt(a),s=v>=65&&v<=90,c=s||v>=97&&v<=122||v>=48&&v<=57,o=s&&!f||!i||!c;f=s,i=c,o&&(n[t++]=a)}return n},me=r=>{r=ge(r);for(var e=r.length,n=ye(r),t=[],f=n[0],i=0,a=0;a<e;++a)f>a?t[a]=f:(f=n[++i],t[a]=f===void 0?e:f);return t},ee=new Map,re=new Map,k=[],J=[],Q=[],N=[],P=[],ne=[],G=[],W=(r,e)=>{var n=r[e];if(n!==void 0)return n;if(typeof e=="function")return e(r);var t=e;Array.isArray(e)||(t=e.split("."));for(var f=t.length,i=-1;r&&++i<f;)r=r[t[i]];return r},q=r=>typeof r=="object"&&typeof r._bitflags=="number",ae=1/0,m=-ae,ie=[];ie.total=0;var b=null,V=K(""),Be=r=>{var e=[],n=0,t={},f=i=>{for(var a=0,v=e[a],s=1;s<n;){var c=s+1;a=s,c<n&&e[c]._score<e[s]._score&&(a=c),e[a-1>>1]=e[a],s=1+(a<<1)}for(var o=a-1>>1;a>0&&v._score<e[o]._score;o=(a=o)-1>>1)e[a]=e[o];e[a]=v};return t.add=(i=>{var a=n;e[n++]=i;for(var v=a-1>>1;a>0&&i._score<e[v]._score;v=(a=v)-1>>1)e[a]=e[v];e[a]=i}),t.poll=(i=>{if(n!==0){var a=e[0];return e[0]=e[--n],f(),a}}),t.peek=(i=>{if(n!==0)return e[0]}),t.replaceTop=(i=>{e[0]=i,f()}),t},X=Be();return{single:E,go:U,prepare:K,cleanup:Se}})})(Y)),Y.exports}var be=we(),pe=de(be);let se=null;self.addEventListener("message",z=>{const{query:$,titles:E,options:U}=z.data;if(E){se=E;return}const R=pe.go($,se,U);self.postMessage({results:R})})})();
